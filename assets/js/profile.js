!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(1)),a=l(n(4)),i=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],b=a.default.oneOfType([a.default.func,a.default.arrayOf(a.default.func)]),g=["onCreate","onDestroy"],h=a.default.func,y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=this;this.props.hasOwnProperty("value")&&this.props.value!==e.value&&this.flatpickr.setDate(this.props.value,!1);var n=this.props.options,r=e.options;w.forEach(function(a){t.props.hasOwnProperty(a)&&(n[a]=t.props[a]),e.hasOwnProperty(a)&&(r[a]=e[a])});for(var a=Object.getOwnPropertyNames(n),i=a.length-1;i>=0;i--){var l=a[i],o=n[l];o!==r[l]&&(-1===w.indexOf(l)||Array.isArray(o)||(o=[o]),this.flatpickr.set(l,o))}}},{key:"componentDidMount",value:function(){var e=this,t=u({onClose:function(){e.node.blur&&e.node.blur()}},this.props.options);w.forEach(function(n){e.props[n]&&(t[n]=e.props[n])}),this.flatpickr=new i.default(this.node,t),this.props.hasOwnProperty("value")&&this.flatpickr.setDate(this.props.value,!1);var n=this.props.onCreate;n&&n(this.flatpickr)}},{key:"componentWillUnmount",value:function(){var e=this.props.onDestroy;e&&e(this.flatpickr),this.flatpickr.destroy()}},{key:"render",value:function(){var e=this,t=this.props,n=t.options,a=t.defaultValue,i=t.value,l=t.children,o=t.render,m=s(t,["options","defaultValue","value","children","render"]),p=function(t){e.node=t};return w.forEach(function(e){delete m[e]}),g.forEach(function(e){delete m[e]}),o?o(u({},m,{defaultValue:a,value:i}),p):n.wrap?r.default.createElement("div",c({},m,{ref:p}),l):r.default.createElement("input",c({},m,{defaultValue:a,ref:p}))}}])&&m(n.prototype,a),l&&m(n,l),t}();v(y,"propTypes",{defaultValue:a.default.string,options:a.default.object,onChange:b,onOpen:b,onClose:b,onMonthChange:b,onYearChange:b,onReady:b,onValueUpdate:b,onDayCreate:b,onCreate:h,onDestroy:h,value:a.default.oneOfType([a.default.string,a.default.array,a.default.object,a.default.number]),children:a.default.node,className:a.default.string,render:a.default.func}),v(y,"defaultProps",{options:{}});var E=y;t.default=E},function(e,t,n){"use strict";e.exports=n(2)},function(e,t,n){"use strict";
/** @license React v16.9.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(3),a="function"==typeof Symbol&&Symbol.for,i=a?Symbol.for("react.element"):60103,l=a?Symbol.for("react.portal"):60106,o=a?Symbol.for("react.fragment"):60107,c=a?Symbol.for("react.strict_mode"):60108,s=a?Symbol.for("react.profiler"):60114,u=a?Symbol.for("react.provider"):60109,m=a?Symbol.for("react.context"):60110,p=a?Symbol.for("react.forward_ref"):60112,d=a?Symbol.for("react.suspense"):60113,f=a?Symbol.for("react.suspense_list"):60120,v=a?Symbol.for("react.memo"):60115,w=a?Symbol.for("react.lazy"):60116;a&&Symbol.for("react.fundamental"),a&&Symbol.for("react.responder");var b="function"==typeof Symbol&&Symbol.iterator;function g(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y={};function E(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||h}function _(){}function O(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||h}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw g(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=E.prototype;var N=O.prototype=new _;N.constructor=O,r(N,E.prototype),N.isPureReactComponent=!0;var k={current:null},j={suspense:null},S={current:null},C=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r=void 0,a={},l=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(l=""+t.key),t)C.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){for(var s=Array(c),u=0;u<c;u++)s[u]=arguments[u+2];a.children=s}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===a[r]&&(a[r]=c[r]);return{$$typeof:i,type:e,key:l,ref:o,props:a,_owner:S.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g,T=[];function M(e,t,n,r){if(T.length){var a=T.pop();return a.result=e,a.keyPrefix=t,a.func=n,a.context=r,a.count=0,a}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function I(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>T.length&&T.push(e)}function L(e,t,n){return null==e?0:function e(t,n,r,a){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var c=!1;if(null===t)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case i:case l:c=!0}}if(c)return r(a,t,""===n?"."+F(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var u=n+F(o=t[s],s);c+=e(o,u,r,a)}else if(null===t||"object"!=typeof t?u=null:u="function"==typeof(u=b&&t[b]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),s=0;!(o=t.next()).done;)c+=e(o=o.value,u=n+F(o,s++),r,a);else if("object"===o)throw r=""+t,g(Error(31),"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return c}(e,"",t,n)}function F(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function J(e,t){e.func.call(e.context,t,e.count++)}function H(e,t,n){var r=e.result,a=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Y(e,r,n,function(e){return e}):null!=e&&(D(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,a+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function Y(e,t,n,r,a){var i="";null!=n&&(i=(""+n).replace(A,"$&/")+"/"),L(e,H,t=M(t,i,r,a)),I(t)}function q(){var e=k.current;if(null===e)throw g(Error(321));return e}var R={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return Y(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;L(e,J,t=M(null,null,t,n)),I(t)},count:function(e){return L(e,function(){return null},null)},toArray:function(e){var t=[];return Y(e,t,null,function(e){return e}),t},only:function(e){if(!D(e))throw g(Error(143));return e}},createRef:function(){return{current:null}},Component:E,PureComponent:O,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:m,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:w,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return q().useCallback(e,t)},useContext:function(e,t){return q().useContext(e,t)},useEffect:function(e,t){return q().useEffect(e,t)},useImperativeHandle:function(e,t,n){return q().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return q().useLayoutEffect(e,t)},useMemo:function(e,t){return q().useMemo(e,t)},useReducer:function(e,t,n){return q().useReducer(e,t,n)},useRef:function(e){return q().useRef(e)},useState:function(e){return q().useState(e)},Fragment:o,Profiler:s,StrictMode:c,Suspense:d,unstable_SuspenseList:f,createElement:P,cloneElement:function(e,t,n){if(null==e)throw g(Error(267),e);var a=void 0,l=r({},e.props),o=e.key,c=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key);var u=void 0;for(a in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)C.call(t,a)&&!x.hasOwnProperty(a)&&(l[a]=void 0===t[a]&&void 0!==u?u[a]:t[a])}if(1===(a=arguments.length-2))l.children=n;else if(1<a){u=Array(a);for(var m=0;m<a;m++)u[m]=arguments[m+2];l.children=u}return{$$typeof:i,type:e.type,key:o,ref:c,props:l,_owner:s}},createFactory:function(e){var t=P.bind(null,e);return t.type=e,t},isValidElement:D,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=j.suspense;j.suspense=void 0===t?null:t;try{e()}finally{j.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:k,ReactCurrentBatchConfig:j,ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r}},U={default:R},W=U&&R||U;e.exports=W.default||W},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function l(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,c=l(e),s=1;s<arguments.length;s++){for(var u in n=Object(arguments[s]))a.call(n,u)&&(c[u]=n[u]);if(r){o=r(n);for(var m=0;m<o.length;m++)i.call(n,o[m])&&(c[o[m]]=n[o[m]])}}return c}},function(e,t,n){e.exports=n(5)()},function(e,t,n){"use strict";var r=n(6);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,l){if(l!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){
/* flatpickr v4.6.3, @license MIT */
e.exports=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var e=function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},r={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},a=function(e){return("0"+e).slice(-2)},i=function(e){return!0===e?1:0};function l(e,t,n){var r;return void 0===n&&(n=!1),function(){var a=this,i=arguments;null!==r&&clearTimeout(r),r=window.setTimeout(function(){r=null,n||e.apply(a,i)},t),n&&!r&&e.apply(a,i)}}var o=function(e){return e instanceof Array?e:[e]};function c(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function s(e,t,n){var r=window.document.createElement(e);return t=t||"",n=n||"",r.className=t,void 0!==n&&(r.textContent=n),r}function u(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function m(e,t){var n=s("div","numInputWrapper"),r=s("input","numInput "+e),a=s("span","arrowUp"),i=s("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==t)for(var l in t)r.setAttribute(l,t[l]);return n.appendChild(r),n.appendChild(a),n.appendChild(i),n}var p=function(){},d=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},f={D:p,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*i(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var r=parseInt(t),a=new Date(e.getFullYear(),0,2+7*(r-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:p,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:p,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},v={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},w={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[w.w(e,t,n)]},F:function(e,t,n){return d(w.n(e,t,n)-1,!1,t)},G:function(e,t,n){return a(w.h(e,t,n))},H:function(e){return a(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[i(e.getHours()>11)]},M:function(e,t){return d(e.getMonth(),!0,t)},S:function(e){return a(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return a(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return a(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return a(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},b=function(e){var t=e.config,a=void 0===t?n:t,i=e.l10n,l=void 0===i?r:i;return function(e,t,n){var r=n||l;return void 0!==a.formatDate?a.formatDate(e,t,r):t.split("").map(function(t,n,i){return w[t]&&"\\"!==i[n-1]?w[t](e,r,a):"\\"!==t?t:""}).join("")}},g=function(e){var t=e.config,a=void 0===t?n:t,i=e.l10n,l=void 0===i?r:i;return function(e,t,r,i){if(0===e||e){var o,c=i||l,s=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)o=new Date(e);else if("string"==typeof e){var u=t||(a||n).dateFormat,m=String(e).trim();if("today"===m)o=new Date,r=!0;else if(/Z$/.test(m)||/GMT$/.test(m))o=new Date(e);else if(a&&a.parseDate)o=a.parseDate(e,u);else{o=a&&a.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var p=void 0,d=[],w=0,b=0,g="";w<u.length;w++){var h=u[w],y="\\"===h,E="\\"===u[w-1]||y;if(v[h]&&!E){g+=v[h];var _=new RegExp(g).exec(e);_&&(p=!0)&&d["Y"!==h?"push":"unshift"]({fn:f[h],val:_[++b]})}else y||(g+=".");d.forEach(function(e){var t=e.fn,n=e.val;return o=t(o,n,c)||o})}o=p?o:void 0}}if(o instanceof Date&&!isNaN(o.getTime()))return!0===r&&o.setHours(0,0,0,0),o;a.errorHandler(new Error("Invalid date provided: "+s))}}};function h(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var y=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},E={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var r=function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})},a=0,i=t;a<i.length;a++){var l=i[a];r(l)}return e});var _=300;function O(p,f){var w={config:e({},n,k.defaultConfig),l10n:r};function O(e){return e.bind(w)}function N(){var e=w.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==w.calendarContainer&&(w.calendarContainer.style.visibility="hidden",w.calendarContainer.style.display="block"),void 0!==w.daysContainer){var t=(w.days.offsetWidth+1)*e.showMonths;w.daysContainer.style.width=t+"px",w.calendarContainer.style.width=t+(void 0!==w.weekWrapper?w.weekWrapper.offsetWidth:0)+"px",w.calendarContainer.style.removeProperty("visibility"),w.calendarContainer.style.removeProperty("display")}})}function j(e){0===w.selectedDates.length&&ae(),void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==w.amPM&&e.target===w.amPM&&(w.amPM.textContent=w.l10n.amPM[i(w.amPM.textContent===w.l10n.amPM[0])]);var r=parseFloat(n.getAttribute("min")),l=parseFloat(n.getAttribute("max")),o=parseFloat(n.getAttribute("step")),c=parseInt(n.value,10),s=e.delta||(t?38===e.which?1:-1:0),u=c+o*s;if(void 0!==n.value&&2===n.value.length){var m=n===w.hourElement,p=n===w.minuteElement;u<r?(u=l+u+i(!m)+(i(m)&&i(!w.amPM)),p&&F(void 0,-1,w.hourElement)):u>l&&(u=n===w.hourElement?u-l-i(!w.amPM):r,p&&F(void 0,1,w.hourElement)),w.amPM&&m&&(1===o?u+c===23:Math.abs(u-c)>o)&&(w.amPM.textContent=w.l10n.amPM[i(w.amPM.textContent===w.l10n.amPM[0])]),n.value=a(u)}}(e);var t=w._input.value;S(),he(),w._input.value!==t&&w._debouncedChange()}function S(){if(void 0!==w.hourElement&&void 0!==w.minuteElement){var e,t,n=(parseInt(w.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(w.minuteElement.value,10)||0)%60,a=void 0!==w.secondElement?(parseInt(w.secondElement.value,10)||0)%60:0;void 0!==w.amPM&&(e=n,t=w.amPM.textContent,n=e%12+12*i(t===w.l10n.amPM[1]));var l=void 0!==w.config.minTime||w.config.minDate&&w.minDateHasTime&&w.latestSelectedDateObj&&0===h(w.latestSelectedDateObj,w.config.minDate,!0);if(void 0!==w.config.maxTime||w.config.maxDate&&w.maxDateHasTime&&w.latestSelectedDateObj&&0===h(w.latestSelectedDateObj,w.config.maxDate,!0)){var o=void 0!==w.config.maxTime?w.config.maxTime:w.config.maxDate;(n=Math.min(n,o.getHours()))===o.getHours()&&(r=Math.min(r,o.getMinutes())),r===o.getMinutes()&&(a=Math.min(a,o.getSeconds()))}if(l){var c=void 0!==w.config.minTime?w.config.minTime:w.config.minDate;(n=Math.max(n,c.getHours()))===c.getHours()&&(r=Math.max(r,c.getMinutes())),r===c.getMinutes()&&(a=Math.max(a,c.getSeconds()))}P(n,r,a)}}function C(e){var t=e||w.latestSelectedDateObj;t&&P(t.getHours(),t.getMinutes(),t.getSeconds())}function x(){var e=w.config.defaultHour,t=w.config.defaultMinute,n=w.config.defaultSeconds;if(void 0!==w.config.minDate){var r=w.config.minDate.getHours(),a=w.config.minDate.getMinutes();(e=Math.max(e,r))===r&&(t=Math.max(a,t)),e===r&&t===a&&(n=w.config.minDate.getSeconds())}if(void 0!==w.config.maxDate){var i=w.config.maxDate.getHours(),l=w.config.maxDate.getMinutes();(e=Math.min(e,i))===i&&(t=Math.min(l,t)),e===i&&t===l&&(n=w.config.maxDate.getSeconds())}P(e,t,n)}function P(e,t,n){void 0!==w.latestSelectedDateObj&&w.latestSelectedDateObj.setHours(e%24,t,n||0,0),w.hourElement&&w.minuteElement&&!w.isMobile&&(w.hourElement.value=a(w.config.time_24hr?e:(12+e)%12+12*i(e%12==0)),w.minuteElement.value=a(t),void 0!==w.amPM&&(w.amPM.textContent=w.l10n.amPM[i(e>=12)]),void 0!==w.secondElement&&(w.secondElement.value=a(n)))}function D(e){var t=parseInt(e.target.value)+(e.delta||0);(t/1e3>1||"Enter"===e.key&&!/[^\d]/.test(t.toString()))&&Z(t)}function A(e,t,n,r){return t instanceof Array?t.forEach(function(t){return A(e,t,n,r)}):e instanceof Array?e.forEach(function(e){return A(e,t,n,r)}):(e.addEventListener(t,n,r),void w._handlers.push({element:e,event:t,handler:n,options:r}))}function T(e){return function(t){1===t.which&&e(t)}}function M(){fe("onChange")}function I(e,t){var n=void 0!==e?w.parseDate(e):w.latestSelectedDateObj||(w.config.minDate&&w.config.minDate>w.now?w.config.minDate:w.config.maxDate&&w.config.maxDate<w.now?w.config.maxDate:w.now),r=w.currentYear,a=w.currentMonth;try{void 0!==n&&(w.currentYear=n.getFullYear(),w.currentMonth=n.getMonth())}catch(e){e.message="Invalid date supplied: "+n,w.config.errorHandler(e)}t&&w.currentYear!==r&&(fe("onYearChange"),W()),!t||w.currentYear===r&&w.currentMonth===a||fe("onMonthChange"),w.redraw()}function L(e){~e.target.className.indexOf("arrow")&&F(e,e.target.classList.contains("arrowUp")?1:-1)}function F(e,t,n){var r=e&&e.target,a=n||r&&r.parentNode&&r.parentNode.firstChild,i=ve("increment");i.delta=t,a&&a.dispatchEvent(i)}function J(e,t,n,r){var a=X(t,!0),i=s("span","flatpickr-day "+e,t.getDate().toString());return i.dateObj=t,i.$i=r,i.setAttribute("aria-label",w.formatDate(t,w.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===h(t,w.now)&&(w.todayDateElem=i,i.classList.add("today"),i.setAttribute("aria-current","date")),a?(i.tabIndex=-1,we(t)&&(i.classList.add("selected"),w.selectedDateElem=i,"range"===w.config.mode&&(c(i,"startRange",w.selectedDates[0]&&0===h(t,w.selectedDates[0],!0)),c(i,"endRange",w.selectedDates[1]&&0===h(t,w.selectedDates[1],!0)),"nextMonthDay"===e&&i.classList.add("inRange")))):i.classList.add("flatpickr-disabled"),"range"===w.config.mode&&function(e){return!("range"!==w.config.mode||w.selectedDates.length<2)&&h(e,w.selectedDates[0])>=0&&h(e,w.selectedDates[1])<=0}(t)&&!we(t)&&i.classList.add("inRange"),w.weekNumbers&&1===w.config.showMonths&&"prevMonthDay"!==e&&n%7==1&&w.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+w.config.getWeek(t)+"</span>"),fe("onDayCreate",i),i}function H(e){e.focus(),"range"===w.config.mode&&ne(e)}function Y(e){for(var t=e>0?0:w.config.showMonths-1,n=e>0?w.config.showMonths:-1,r=t;r!=n;r+=e)for(var a=w.daysContainer.children[r],i=e>0?0:a.children.length-1,l=e>0?a.children.length:-1,o=i;o!=l;o+=e){var c=a.children[o];if(-1===c.className.indexOf("hidden")&&X(c.dateObj))return c}}function q(e,t){var n=ee(document.activeElement||document.body),r=void 0!==e?e:n?document.activeElement:void 0!==w.selectedDateElem&&ee(w.selectedDateElem)?w.selectedDateElem:void 0!==w.todayDateElem&&ee(w.todayDateElem)?w.todayDateElem:Y(t>0?1:-1);return void 0===r?w._input.focus():n?void function(e,t){for(var n=-1===e.className.indexOf("Month")?e.dateObj.getMonth():w.currentMonth,r=t>0?w.config.showMonths:-1,a=t>0?1:-1,i=n-w.currentMonth;i!=r;i+=a)for(var l=w.daysContainer.children[i],o=n-w.currentMonth===i?e.$i+t:t<0?l.children.length-1:0,c=l.children.length,s=o;s>=0&&s<c&&s!=(t>0?c:-1);s+=a){var u=l.children[s];if(-1===u.className.indexOf("hidden")&&X(u.dateObj)&&Math.abs(e.$i-s)>=Math.abs(t))return H(u)}w.changeMonth(a),q(Y(a),0)}(r,t):H(r)}function R(e,t){for(var n=(new Date(e,t,1).getDay()-w.l10n.firstDayOfWeek+7)%7,r=w.utils.getDaysInMonth((t-1+12)%12),a=w.utils.getDaysInMonth(t),i=window.document.createDocumentFragment(),l=w.config.showMonths>1,o=l?"prevMonthDay hidden":"prevMonthDay",c=l?"nextMonthDay hidden":"nextMonthDay",u=r+1-n,m=0;u<=r;u++,m++)i.appendChild(J(o,new Date(e,t-1,u),u,m));for(u=1;u<=a;u++,m++)i.appendChild(J("",new Date(e,t,u),u,m));for(var p=a+1;p<=42-n&&(1===w.config.showMonths||m%7!=0);p++,m++)i.appendChild(J(c,new Date(e,t+1,p%a),p,m));var d=s("div","dayContainer");return d.appendChild(i),d}function U(){if(void 0!==w.daysContainer){u(w.daysContainer),w.weekNumbers&&u(w.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<w.config.showMonths;t++){var n=new Date(w.currentYear,w.currentMonth,1);n.setMonth(w.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}w.daysContainer.appendChild(e),w.days=w.daysContainer.firstChild,"range"===w.config.mode&&1===w.selectedDates.length&&ne()}}function W(){if(!(w.config.showMonths>1||"dropdown"!==w.config.monthSelectorType)){var e=function(e){return!(void 0!==w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&e<w.config.minDate.getMonth()||void 0!==w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()&&e>w.config.maxDate.getMonth())};w.monthsDropdownContainer.tabIndex=-1,w.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var n=s("option","flatpickr-monthDropdown-month");n.value=new Date(w.currentYear,t).getMonth().toString(),n.textContent=d(t,w.config.shorthandCurrentMonth,w.l10n),n.tabIndex=-1,w.currentMonth===t&&(n.selected=!0),w.monthsDropdownContainer.appendChild(n)}}}function z(){var e,t=s("div","flatpickr-month"),n=window.document.createDocumentFragment();w.config.showMonths>1||"static"===w.config.monthSelectorType?e=s("span","cur-month"):(w.monthsDropdownContainer=s("select","flatpickr-monthDropdown-months"),A(w.monthsDropdownContainer,"change",function(e){var t=e.target,n=parseInt(t.value,10);w.changeMonth(n-w.currentMonth),fe("onMonthChange")}),W(),e=w.monthsDropdownContainer);var r=m("cur-year",{tabindex:"-1"}),a=r.getElementsByTagName("input")[0];a.setAttribute("aria-label",w.l10n.yearAriaLabel),w.config.minDate&&a.setAttribute("min",w.config.minDate.getFullYear().toString()),w.config.maxDate&&(a.setAttribute("max",w.config.maxDate.getFullYear().toString()),a.disabled=!!w.config.minDate&&w.config.minDate.getFullYear()===w.config.maxDate.getFullYear());var i=s("div","flatpickr-current-month");return i.appendChild(e),i.appendChild(r),n.appendChild(i),t.appendChild(n),{container:t,yearElement:a,monthElement:e}}function $(){u(w.monthNav),w.monthNav.appendChild(w.prevMonthNav),w.config.showMonths&&(w.yearElements=[],w.monthElements=[]);for(var e=w.config.showMonths;e--;){var t=z();w.yearElements.push(t.yearElement),w.monthElements.push(t.monthElement),w.monthNav.appendChild(t.container)}w.monthNav.appendChild(w.nextMonthNav)}function B(){w.weekdayContainer?u(w.weekdayContainer):w.weekdayContainer=s("div","flatpickr-weekdays");for(var e=w.config.showMonths;e--;){var t=s("div","flatpickr-weekdaycontainer");w.weekdayContainer.appendChild(t)}return K(),w.weekdayContainer}function K(){if(w.weekdayContainer){var e=w.l10n.firstDayOfWeek,t=w.l10n.weekdays.shorthand.slice();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=w.config.showMonths;n--;)w.weekdayContainer.children[n].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function V(e,t){void 0===t&&(t=!0);var n=t?e:e-w.currentMonth;n<0&&!0===w._hidePrevMonthArrow||n>0&&!0===w._hideNextMonthArrow||(w.currentMonth+=n,(w.currentMonth<0||w.currentMonth>11)&&(w.currentYear+=w.currentMonth>11?1:-1,w.currentMonth=(w.currentMonth+12)%12,fe("onYearChange"),W()),U(),fe("onMonthChange"),be())}function G(e){return!(!w.config.appendTo||!w.config.appendTo.contains(e))||w.calendarContainer.contains(e)}function Q(e){if(w.isOpen&&!w.config.inline){var t="function"==typeof(l=e).composedPath?l.composedPath()[0]:l.target,n=G(t),r=t===w.input||t===w.altInput||w.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(w.input)||~e.path.indexOf(w.altInput)),a="blur"===e.type?r&&e.relatedTarget&&!G(e.relatedTarget):!r&&!n&&!G(e.relatedTarget),i=!w.config.ignoredFocusElements.some(function(e){return e.contains(t)});a&&i&&(void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement&&j(),w.close(),"range"===w.config.mode&&1===w.selectedDates.length&&(w.clear(!1),w.redraw()))}var l}function Z(e){if(!(!e||w.config.minDate&&e<w.config.minDate.getFullYear()||w.config.maxDate&&e>w.config.maxDate.getFullYear())){var t=e,n=w.currentYear!==t;w.currentYear=t||w.currentYear,w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth=Math.min(w.config.maxDate.getMonth(),w.currentMonth):w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&(w.currentMonth=Math.max(w.config.minDate.getMonth(),w.currentMonth)),n&&(w.redraw(),fe("onYearChange"),W())}}function X(e,t){void 0===t&&(t=!0);var n=w.parseDate(e,void 0,t);if(w.config.minDate&&n&&h(n,w.config.minDate,void 0!==t?t:!w.minDateHasTime)<0||w.config.maxDate&&n&&h(n,w.config.maxDate,void 0!==t?t:!w.maxDateHasTime)>0)return!1;if(0===w.config.enable.length&&0===w.config.disable.length)return!0;if(void 0===n)return!1;for(var r=w.config.enable.length>0,a=r?w.config.enable:w.config.disable,i=0,l=void 0;i<a.length;i++){if("function"==typeof(l=a[i])&&l(n))return r;if(l instanceof Date&&void 0!==n&&l.getTime()===n.getTime())return r;if("string"==typeof l&&void 0!==n){var o=w.parseDate(l,void 0,!0);return o&&o.getTime()===n.getTime()?r:!r}if("object"==typeof l&&void 0!==n&&l.from&&l.to&&n.getTime()>=l.from.getTime()&&n.getTime()<=l.to.getTime())return r}return!r}function ee(e){return void 0!==w.daysContainer&&-1===e.className.indexOf("hidden")&&w.daysContainer.contains(e)}function te(e){var t=e.target===w._input,n=w.config.allowInput,r=w.isOpen&&(!n||!t),a=w.config.inline&&t&&!n;if(13===e.keyCode&&t){if(n)return w.setDate(w._input.value,!0,e.target===w.altInput?w.config.altFormat:w.config.dateFormat),e.target.blur();w.open()}else if(G(e.target)||r||a){var i=!!w.timeContainer&&w.timeContainer.contains(e.target);switch(e.keyCode){case 13:i?(e.preventDefault(),j(),se()):ue(e);break;case 27:e.preventDefault(),se();break;case 8:case 46:t&&!w.config.allowInput&&(e.preventDefault(),w.clear());break;case 37:case 39:if(i||t)w.hourElement&&w.hourElement.focus();else if(e.preventDefault(),void 0!==w.daysContainer&&(!1===n||document.activeElement&&ee(document.activeElement))){var l=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),V(l),q(Y(1),0)):q(void 0,l)}break;case 38:case 40:e.preventDefault();var o=40===e.keyCode?1:-1;w.daysContainer&&void 0!==e.target.$i||e.target===w.input||e.target===w.altInput?e.ctrlKey?(e.stopPropagation(),Z(w.currentYear-o),q(Y(1),0)):i||q(void 0,7*o):e.target===w.currentYearElement?Z(w.currentYear-o):w.config.enableTime&&(!i&&w.hourElement&&w.hourElement.focus(),j(e),w._debouncedChange());break;case 9:if(i){var c=[w.hourElement,w.minuteElement,w.secondElement,w.amPM].concat(w.pluginElements).filter(function(e){return e}),s=c.indexOf(e.target);if(-1!==s){var u=c[s+(e.shiftKey?-1:1)];e.preventDefault(),(u||w._input).focus()}}else!w.config.noCalendar&&w.daysContainer&&w.daysContainer.contains(e.target)&&e.shiftKey&&(e.preventDefault(),w._input.focus())}}if(void 0!==w.amPM&&e.target===w.amPM)switch(e.key){case w.l10n.amPM[0].charAt(0):case w.l10n.amPM[0].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[0],S(),he();break;case w.l10n.amPM[1].charAt(0):case w.l10n.amPM[1].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[1],S(),he()}(t||G(e.target))&&fe("onKeyDown",e)}function ne(e){if(1===w.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled"))){for(var t=e?e.dateObj.getTime():w.days.firstElementChild.dateObj.getTime(),n=w.parseDate(w.selectedDates[0],void 0,!0).getTime(),r=Math.min(t,w.selectedDates[0].getTime()),a=Math.max(t,w.selectedDates[0].getTime()),i=!1,l=0,o=0,c=r;c<a;c+=E.DAY)X(new Date(c),!0)||(i=i||c>r&&c<a,c<n&&(!l||c>l)?l=c:c>n&&(!o||c<o)&&(o=c));for(var s=0;s<w.config.showMonths;s++)for(var u=w.daysContainer.children[s],m=function(r,a){var c=u.children[r],s=c.dateObj.getTime(),m=l>0&&s<l||o>0&&s>o;return m?(c.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){c.classList.remove(e)}),"continue"):i&&!m?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){c.classList.remove(e)}),void(void 0!==e&&(e.classList.add(t<=w.selectedDates[0].getTime()?"startRange":"endRange"),n<t&&s===n?c.classList.add("startRange"):n>t&&s===n&&c.classList.add("endRange"),s>=l&&(0===o||s<=o)&&y(s,n,t)&&c.classList.add("inRange"))))},p=0,d=u.children.length;p<d;p++)m(p)}}function re(){!w.isOpen||w.config.static||w.config.inline||oe()}function ae(){w.setDate(void 0!==w.config.minDate?new Date(w.config.minDate.getTime()):new Date,!0),x(),he()}function ie(e){return function(t){var n=w.config["_"+e+"Date"]=w.parseDate(t,w.config.dateFormat),r=w.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(w["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),w.selectedDates&&(w.selectedDates=w.selectedDates.filter(function(e){return X(e)}),w.selectedDates.length||"min"!==e||C(n),he()),w.daysContainer&&(ce(),void 0!==n?w.currentYearElement[e]=n.getFullYear().toString():w.currentYearElement.removeAttribute(e),w.currentYearElement.disabled=!!r&&void 0!==n&&r.getFullYear()===n.getFullYear())}}function le(){"object"!=typeof w.config.locale&&void 0===k.l10ns[w.config.locale]&&w.config.errorHandler(new Error("flatpickr: invalid locale "+w.config.locale)),w.l10n=e({},k.l10ns.default,"object"==typeof w.config.locale?w.config.locale:"default"!==w.config.locale?k.l10ns[w.config.locale]:void 0),v.K="("+w.l10n.amPM[0]+"|"+w.l10n.amPM[1]+"|"+w.l10n.amPM[0].toLowerCase()+"|"+w.l10n.amPM[1].toLowerCase()+")",void 0===e({},f,JSON.parse(JSON.stringify(p.dataset||{}))).time_24hr&&void 0===k.defaultConfig.time_24hr&&(w.config.time_24hr=w.l10n.time_24hr),w.formatDate=b(w),w.parseDate=g({config:w.config,l10n:w.l10n})}function oe(e){if(void 0!==w.calendarContainer){fe("onPreCalendarPosition");var t=e||w._positionElement,n=Array.prototype.reduce.call(w.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),r=w.calendarContainer.offsetWidth,a=w.config.position.split(" "),i=a[0],l=a.length>1?a[1]:null,o=t.getBoundingClientRect(),s=window.innerHeight-o.bottom,u="above"===i||"below"!==i&&s<n&&o.top>n,m=window.pageYOffset+o.top+(u?-n-2:t.offsetHeight+2);if(c(w.calendarContainer,"arrowTop",!u),c(w.calendarContainer,"arrowBottom",u),!w.config.inline){var p=window.pageXOffset+o.left-(null!=l&&"center"===l?(r-o.width)/2:0),d=window.document.body.offsetWidth-(window.pageXOffset+o.right),f=p+r>window.document.body.offsetWidth,v=d+r>window.document.body.offsetWidth;if(c(w.calendarContainer,"rightMost",f),!w.config.static)if(w.calendarContainer.style.top=m+"px",f)if(v){var b=document.styleSheets[0];if(void 0===b)return;var g=window.document.body.offsetWidth,h=Math.max(0,g/2-r/2),y=b.cssRules.length,E="{left:"+o.left+"px;right:auto;}";c(w.calendarContainer,"rightMost",!1),c(w.calendarContainer,"centerMost",!0),b.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+E,y),w.calendarContainer.style.left=h+"px",w.calendarContainer.style.right="auto"}else w.calendarContainer.style.left="auto",w.calendarContainer.style.right=d+"px";else w.calendarContainer.style.left=p+"px",w.calendarContainer.style.right="auto"}}}function ce(){w.config.noCalendar||w.isMobile||(be(),U())}function se(){w._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(w.close,0):w.close()}function ue(e){e.preventDefault(),e.stopPropagation();var t=function e(t,n){return n(t)?t:t.parentNode?e(t.parentNode,n):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")});if(void 0!==t){var n=t,r=w.latestSelectedDateObj=new Date(n.dateObj.getTime()),a=(r.getMonth()<w.currentMonth||r.getMonth()>w.currentMonth+w.config.showMonths-1)&&"range"!==w.config.mode;if(w.selectedDateElem=n,"single"===w.config.mode)w.selectedDates=[r];else if("multiple"===w.config.mode){var i=we(r);i?w.selectedDates.splice(parseInt(i),1):w.selectedDates.push(r)}else"range"===w.config.mode&&(2===w.selectedDates.length&&w.clear(!1,!1),w.latestSelectedDateObj=r,w.selectedDates.push(r),0!==h(r,w.selectedDates[0],!0)&&w.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(S(),a){var l=w.currentYear!==r.getFullYear();w.currentYear=r.getFullYear(),w.currentMonth=r.getMonth(),l&&(fe("onYearChange"),W()),fe("onMonthChange")}if(be(),U(),he(),w.config.enableTime&&setTimeout(function(){return w.showTimeInput=!0},50),a||"range"===w.config.mode||1!==w.config.showMonths?void 0!==w.selectedDateElem&&void 0===w.hourElement&&w.selectedDateElem&&w.selectedDateElem.focus():H(n),void 0!==w.hourElement&&void 0!==w.hourElement&&w.hourElement.focus(),w.config.closeOnSelect){var o="single"===w.config.mode&&!w.config.enableTime,c="range"===w.config.mode&&2===w.selectedDates.length&&!w.config.enableTime;(o||c)&&se()}M()}}w.parseDate=g({config:w.config,l10n:w.l10n}),w._handlers=[],w.pluginElements=[],w.loadedPlugins=[],w._bind=A,w._setHoursFromDate=C,w._positionCalendar=oe,w.changeMonth=V,w.changeYear=Z,w.clear=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),w.input.value="",void 0!==w.altInput&&(w.altInput.value=""),void 0!==w.mobileInput&&(w.mobileInput.value=""),w.selectedDates=[],w.latestSelectedDateObj=void 0,!0===t&&(w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth()),w.showTimeInput=!1,!0===w.config.enableTime&&x(),w.redraw(),e&&fe("onChange")},w.close=function(){w.isOpen=!1,w.isMobile||(void 0!==w.calendarContainer&&w.calendarContainer.classList.remove("open"),void 0!==w._input&&w._input.classList.remove("active")),fe("onClose")},w._createElement=s,w.destroy=function(){void 0!==w.config&&fe("onDestroy");for(var e=w._handlers.length;e--;){var t=w._handlers[e];t.element.removeEventListener(t.event,t.handler,t.options)}if(w._handlers=[],w.mobileInput)w.mobileInput.parentNode&&w.mobileInput.parentNode.removeChild(w.mobileInput),w.mobileInput=void 0;else if(w.calendarContainer&&w.calendarContainer.parentNode)if(w.config.static&&w.calendarContainer.parentNode){var n=w.calendarContainer.parentNode;if(n.lastChild&&n.removeChild(n.lastChild),n.parentNode){for(;n.firstChild;)n.parentNode.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)}}else w.calendarContainer.parentNode.removeChild(w.calendarContainer);w.altInput&&(w.input.type="text",w.altInput.parentNode&&w.altInput.parentNode.removeChild(w.altInput),delete w.altInput),w.input&&(w.input.type=w.input._type,w.input.classList.remove("flatpickr-input"),w.input.removeAttribute("readonly"),w.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete w[e]}catch(e){}})},w.isEnabled=X,w.jumpToDate=I,w.open=function(e,t){if(void 0===t&&(t=w._positionElement),!0===w.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==w.mobileInput&&(w.mobileInput.focus(),w.mobileInput.click()),void fe("onOpen");if(!w._input.disabled&&!w.config.inline){var n=w.isOpen;w.isOpen=!0,n||(w.calendarContainer.classList.add("open"),w._input.classList.add("active"),fe("onOpen"),oe(t)),!0===w.config.enableTime&&!0===w.config.noCalendar&&(0===w.selectedDates.length&&ae(),!1!==w.config.allowInput||void 0!==e&&w.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return w.hourElement.select()},50))}},w.redraw=ce,w.set=function(e,n){if(null!==e&&"object"==typeof e)for(var r in Object.assign(w.config,e),e)void 0!==me[r]&&me[r].forEach(function(e){return e()});else w.config[e]=n,void 0!==me[e]?me[e].forEach(function(e){return e()}):t.indexOf(e)>-1&&(w.config[e]=o(n));w.redraw(),he(!1)},w.setDate=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=w.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return w.clear(t);pe(e,n),w.showTimeInput=w.selectedDates.length>0,w.latestSelectedDateObj=w.selectedDates[w.selectedDates.length-1],w.redraw(),I(),C(),0===w.selectedDates.length&&w.clear(!1),he(t),t&&fe("onChange")},w.toggle=function(e){if(!0===w.isOpen)return w.close();w.open(e)};var me={locale:[le,K],showMonths:[$,N,B],minDate:[I],maxDate:[I]};function pe(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return w.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[w.parseDate(e,t)];else if("string"==typeof e)switch(w.config.mode){case"single":case"time":n=[w.parseDate(e,t)];break;case"multiple":n=e.split(w.config.conjunction).map(function(e){return w.parseDate(e,t)});break;case"range":n=e.split(w.l10n.rangeSeparator).map(function(e){return w.parseDate(e,t)})}else w.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));w.selectedDates=n.filter(function(e){return e instanceof Date&&X(e,!1)}),"range"===w.config.mode&&w.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function de(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?w.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:w.parseDate(e.from,void 0),to:w.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function fe(e,t){if(void 0!==w.config){var n=w.config[e];if(void 0!==n&&n.length>0)for(var r=0;n[r]&&r<n.length;r++)n[r](w.selectedDates,w.input.value,w,t);"onChange"===e&&(w.input.dispatchEvent(ve("change")),w.input.dispatchEvent(ve("input")))}}function ve(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function we(e){for(var t=0;t<w.selectedDates.length;t++)if(0===h(w.selectedDates[t],e))return""+t;return!1}function be(){w.config.noCalendar||w.isMobile||!w.monthNav||(w.yearElements.forEach(function(e,t){var n=new Date(w.currentYear,w.currentMonth,1);n.setMonth(w.currentMonth+t),w.config.showMonths>1||"static"===w.config.monthSelectorType?w.monthElements[t].textContent=d(n.getMonth(),w.config.shorthandCurrentMonth,w.l10n)+" ":w.monthsDropdownContainer.value=n.getMonth().toString(),e.value=n.getFullYear().toString()}),w._hidePrevMonthArrow=void 0!==w.config.minDate&&(w.currentYear===w.config.minDate.getFullYear()?w.currentMonth<=w.config.minDate.getMonth():w.currentYear<w.config.minDate.getFullYear()),w._hideNextMonthArrow=void 0!==w.config.maxDate&&(w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth+1>w.config.maxDate.getMonth():w.currentYear>w.config.maxDate.getFullYear()))}function ge(e){return w.selectedDates.map(function(t){return w.formatDate(t,e)}).filter(function(e,t,n){return"range"!==w.config.mode||w.config.enableTime||n.indexOf(e)===t}).join("range"!==w.config.mode?w.config.conjunction:w.l10n.rangeSeparator)}function he(e){void 0===e&&(e=!0),void 0!==w.mobileInput&&w.mobileFormatStr&&(w.mobileInput.value=void 0!==w.latestSelectedDateObj?w.formatDate(w.latestSelectedDateObj,w.mobileFormatStr):""),w.input.value=ge(w.config.dateFormat),void 0!==w.altInput&&(w.altInput.value=ge(w.config.altFormat)),!1!==e&&fe("onValueUpdate")}function ye(e){var t=w.prevMonthNav.contains(e.target),n=w.nextMonthNav.contains(e.target);t||n?V(t?-1:1):w.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?w.changeYear(w.currentYear+1):e.target.classList.contains("arrowDown")&&w.changeYear(w.currentYear-1)}return function(){w.element=w.input=p,w.isOpen=!1,function(){var r=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],a=e({},f,JSON.parse(JSON.stringify(p.dataset||{}))),i={};w.config.parseDate=a.parseDate,w.config.formatDate=a.formatDate,Object.defineProperty(w.config,"enable",{get:function(){return w.config._enable},set:function(e){w.config._enable=de(e)}}),Object.defineProperty(w.config,"disable",{get:function(){return w.config._disable},set:function(e){w.config._disable=de(e)}});var l="time"===a.mode;if(!a.dateFormat&&(a.enableTime||l)){var c=k.defaultConfig.dateFormat||n.dateFormat;i.dateFormat=a.noCalendar||l?"H:i"+(a.enableSeconds?":S":""):c+" H:i"+(a.enableSeconds?":S":"")}if(a.altInput&&(a.enableTime||l)&&!a.altFormat){var s=k.defaultConfig.altFormat||n.altFormat;i.altFormat=a.noCalendar||l?"h:i"+(a.enableSeconds?":S K":" K"):s+" h:i"+(a.enableSeconds?":S":"")+" K"}a.altInputClass||(w.config.altInputClass=w.input.className+" "+w.config.altInputClass),Object.defineProperty(w.config,"minDate",{get:function(){return w.config._minDate},set:ie("min")}),Object.defineProperty(w.config,"maxDate",{get:function(){return w.config._maxDate},set:ie("max")});var u=function(e){return function(t){w.config["min"===e?"_minTime":"_maxTime"]=w.parseDate(t,"H:i:S")}};Object.defineProperty(w.config,"minTime",{get:function(){return w.config._minTime},set:u("min")}),Object.defineProperty(w.config,"maxTime",{get:function(){return w.config._maxTime},set:u("max")}),"time"===a.mode&&(w.config.noCalendar=!0,w.config.enableTime=!0),Object.assign(w.config,i,a);for(var m=0;m<r.length;m++)w.config[r[m]]=!0===w.config[r[m]]||"true"===w.config[r[m]];for(t.filter(function(e){return void 0!==w.config[e]}).forEach(function(e){w.config[e]=o(w.config[e]||[]).map(O)}),w.isMobile=!w.config.disableMobile&&!w.config.inline&&"single"===w.config.mode&&!w.config.disable.length&&!w.config.enable.length&&!w.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),m=0;m<w.config.plugins.length;m++){var d=w.config.plugins[m](w)||{};for(var v in d)t.indexOf(v)>-1?w.config[v]=o(d[v]).map(O).concat(w.config[v]):void 0===a[v]&&(w.config[v]=d[v])}fe("onParseConfig")}(),le(),w.input=w.config.wrap?p.querySelector("[data-input]"):p,w.input?(w.input._type=w.input.type,w.input.type="text",w.input.classList.add("flatpickr-input"),w._input=w.input,w.config.altInput&&(w.altInput=s(w.input.nodeName,w.config.altInputClass),w._input=w.altInput,w.altInput.placeholder=w.input.placeholder,w.altInput.disabled=w.input.disabled,w.altInput.required=w.input.required,w.altInput.tabIndex=w.input.tabIndex,w.altInput.type="text",w.input.setAttribute("type","hidden"),!w.config.static&&w.input.parentNode&&w.input.parentNode.insertBefore(w.altInput,w.input.nextSibling)),w.config.allowInput||w._input.setAttribute("readonly","readonly"),w._positionElement=w.config.positionElement||w._input):w.config.errorHandler(new Error("Invalid input element specified")),function(){w.selectedDates=[],w.now=w.parseDate(w.config.now)||new Date;var e=w.config.defaultDate||("INPUT"!==w.input.nodeName&&"TEXTAREA"!==w.input.nodeName||!w.input.placeholder||w.input.value!==w.input.placeholder?w.input.value:null);e&&pe(e,w.config.dateFormat),w._initialDate=w.selectedDates.length>0?w.selectedDates[0]:w.config.minDate&&w.config.minDate.getTime()>w.now.getTime()?w.config.minDate:w.config.maxDate&&w.config.maxDate.getTime()<w.now.getTime()?w.config.maxDate:w.now,w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth(),w.selectedDates.length>0&&(w.latestSelectedDateObj=w.selectedDates[0]),void 0!==w.config.minTime&&(w.config.minTime=w.parseDate(w.config.minTime,"H:i")),void 0!==w.config.maxTime&&(w.config.maxTime=w.parseDate(w.config.maxTime,"H:i")),w.minDateHasTime=!!w.config.minDate&&(w.config.minDate.getHours()>0||w.config.minDate.getMinutes()>0||w.config.minDate.getSeconds()>0),w.maxDateHasTime=!!w.config.maxDate&&(w.config.maxDate.getHours()>0||w.config.maxDate.getMinutes()>0||w.config.maxDate.getSeconds()>0),Object.defineProperty(w,"showTimeInput",{get:function(){return w._showTimeInput},set:function(e){w._showTimeInput=e,w.calendarContainer&&c(w.calendarContainer,"showTimeInput",e),w.isOpen&&oe()}})}(),w.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=w.currentMonth),void 0===t&&(t=w.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:w.l10n.daysInMonth[e]}},w.isMobile||function(){var e=window.document.createDocumentFragment();if(w.calendarContainer=s("div","flatpickr-calendar"),w.calendarContainer.tabIndex=-1,!w.config.noCalendar){if(e.appendChild((w.monthNav=s("div","flatpickr-months"),w.yearElements=[],w.monthElements=[],w.prevMonthNav=s("span","flatpickr-prev-month"),w.prevMonthNav.innerHTML=w.config.prevArrow,w.nextMonthNav=s("span","flatpickr-next-month"),w.nextMonthNav.innerHTML=w.config.nextArrow,$(),Object.defineProperty(w,"_hidePrevMonthArrow",{get:function(){return w.__hidePrevMonthArrow},set:function(e){w.__hidePrevMonthArrow!==e&&(c(w.prevMonthNav,"flatpickr-disabled",e),w.__hidePrevMonthArrow=e)}}),Object.defineProperty(w,"_hideNextMonthArrow",{get:function(){return w.__hideNextMonthArrow},set:function(e){w.__hideNextMonthArrow!==e&&(c(w.nextMonthNav,"flatpickr-disabled",e),w.__hideNextMonthArrow=e)}}),w.currentYearElement=w.yearElements[0],be(),w.monthNav)),w.innerContainer=s("div","flatpickr-innerContainer"),w.config.weekNumbers){var t=function(){w.calendarContainer.classList.add("hasWeeks");var e=s("div","flatpickr-weekwrapper");e.appendChild(s("span","flatpickr-weekday",w.l10n.weekAbbreviation));var t=s("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}(),n=t.weekWrapper,r=t.weekNumbers;w.innerContainer.appendChild(n),w.weekNumbers=r,w.weekWrapper=n}w.rContainer=s("div","flatpickr-rContainer"),w.rContainer.appendChild(B()),w.daysContainer||(w.daysContainer=s("div","flatpickr-days"),w.daysContainer.tabIndex=-1),U(),w.rContainer.appendChild(w.daysContainer),w.innerContainer.appendChild(w.rContainer),e.appendChild(w.innerContainer)}w.config.enableTime&&e.appendChild(function(){w.calendarContainer.classList.add("hasTime"),w.config.noCalendar&&w.calendarContainer.classList.add("noCalendar"),w.timeContainer=s("div","flatpickr-time"),w.timeContainer.tabIndex=-1;var e=s("span","flatpickr-time-separator",":"),t=m("flatpickr-hour",{"aria-label":w.l10n.hourAriaLabel});w.hourElement=t.getElementsByTagName("input")[0];var n=m("flatpickr-minute",{"aria-label":w.l10n.minuteAriaLabel});if(w.minuteElement=n.getElementsByTagName("input")[0],w.hourElement.tabIndex=w.minuteElement.tabIndex=-1,w.hourElement.value=a(w.latestSelectedDateObj?w.latestSelectedDateObj.getHours():w.config.time_24hr?w.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(w.config.defaultHour)),w.minuteElement.value=a(w.latestSelectedDateObj?w.latestSelectedDateObj.getMinutes():w.config.defaultMinute),w.hourElement.setAttribute("step",w.config.hourIncrement.toString()),w.minuteElement.setAttribute("step",w.config.minuteIncrement.toString()),w.hourElement.setAttribute("min",w.config.time_24hr?"0":"1"),w.hourElement.setAttribute("max",w.config.time_24hr?"23":"12"),w.minuteElement.setAttribute("min","0"),w.minuteElement.setAttribute("max","59"),w.timeContainer.appendChild(t),w.timeContainer.appendChild(e),w.timeContainer.appendChild(n),w.config.time_24hr&&w.timeContainer.classList.add("time24hr"),w.config.enableSeconds){w.timeContainer.classList.add("hasSeconds");var r=m("flatpickr-second");w.secondElement=r.getElementsByTagName("input")[0],w.secondElement.value=a(w.latestSelectedDateObj?w.latestSelectedDateObj.getSeconds():w.config.defaultSeconds),w.secondElement.setAttribute("step",w.minuteElement.getAttribute("step")),w.secondElement.setAttribute("min","0"),w.secondElement.setAttribute("max","59"),w.timeContainer.appendChild(s("span","flatpickr-time-separator",":")),w.timeContainer.appendChild(r)}return w.config.time_24hr||(w.amPM=s("span","flatpickr-am-pm",w.l10n.amPM[i((w.latestSelectedDateObj?w.hourElement.value:w.config.defaultHour)>11)]),w.amPM.title=w.l10n.toggleTitle,w.amPM.tabIndex=-1,w.timeContainer.appendChild(w.amPM)),w.timeContainer}()),c(w.calendarContainer,"rangeMode","range"===w.config.mode),c(w.calendarContainer,"animate",!0===w.config.animate),c(w.calendarContainer,"multiMonth",w.config.showMonths>1),w.calendarContainer.appendChild(e);var l=void 0!==w.config.appendTo&&void 0!==w.config.appendTo.nodeType;if((w.config.inline||w.config.static)&&(w.calendarContainer.classList.add(w.config.inline?"inline":"static"),w.config.inline&&(!l&&w.element.parentNode?w.element.parentNode.insertBefore(w.calendarContainer,w._input.nextSibling):void 0!==w.config.appendTo&&w.config.appendTo.appendChild(w.calendarContainer)),w.config.static)){var o=s("div","flatpickr-wrapper");w.element.parentNode&&w.element.parentNode.insertBefore(o,w.element),o.appendChild(w.element),w.altInput&&o.appendChild(w.altInput),o.appendChild(w.calendarContainer)}w.config.static||w.config.inline||(void 0!==w.config.appendTo?w.config.appendTo:window.document.body).appendChild(w.calendarContainer)}(),function(){if(w.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(w.element.querySelectorAll("[data-"+e+"]"),function(t){return A(t,"click",w[e])})}),w.isMobile)!function(){var e=w.config.enableTime?w.config.noCalendar?"time":"datetime-local":"date";w.mobileInput=s("input",w.input.className+" flatpickr-mobile"),w.mobileInput.step=w.input.getAttribute("step")||"any",w.mobileInput.tabIndex=1,w.mobileInput.type=e,w.mobileInput.disabled=w.input.disabled,w.mobileInput.required=w.input.required,w.mobileInput.placeholder=w.input.placeholder,w.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",w.selectedDates.length>0&&(w.mobileInput.defaultValue=w.mobileInput.value=w.formatDate(w.selectedDates[0],w.mobileFormatStr)),w.config.minDate&&(w.mobileInput.min=w.formatDate(w.config.minDate,"Y-m-d")),w.config.maxDate&&(w.mobileInput.max=w.formatDate(w.config.maxDate,"Y-m-d")),w.input.type="hidden",void 0!==w.altInput&&(w.altInput.type="hidden");try{w.input.parentNode&&w.input.parentNode.insertBefore(w.mobileInput,w.input.nextSibling)}catch(e){}A(w.mobileInput,"change",function(e){w.setDate(e.target.value,!1,w.mobileFormatStr),fe("onChange"),fe("onClose")})}();else{var e=l(re,50);w._debouncedChange=l(M,_),w.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&A(w.daysContainer,"mouseover",function(e){"range"===w.config.mode&&ne(e.target)}),A(window.document.body,"keydown",te),w.config.inline||w.config.static||A(window,"resize",e),void 0!==window.ontouchstart?A(window.document,"touchstart",Q):A(window.document,"mousedown",T(Q)),A(window.document,"focus",Q,{capture:!0}),!0===w.config.clickOpens&&(A(w._input,"focus",w.open),A(w._input,"mousedown",T(w.open))),void 0!==w.daysContainer&&(A(w.monthNav,"mousedown",T(ye)),A(w.monthNav,["keyup","increment"],D),A(w.daysContainer,"mousedown",T(ue))),void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement&&(A(w.timeContainer,["increment"],j),A(w.timeContainer,"blur",j,{capture:!0}),A(w.timeContainer,"mousedown",T(L)),A([w.hourElement,w.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==w.secondElement&&A(w.secondElement,"focus",function(){return w.secondElement&&w.secondElement.select()}),void 0!==w.amPM&&A(w.amPM,"mousedown",T(function(e){j(e),M()})))}}(),(w.selectedDates.length||w.config.noCalendar)&&(w.config.enableTime&&C(w.config.noCalendar?w.latestSelectedDateObj||w.config.minDate:void 0),he(!1)),N(),w.showTimeInput=w.selectedDates.length>0||w.config.noCalendar;var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!w.isMobile&&r&&oe(),fe("onReady")}(),w}function N(e,t){for(var n=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),r=[],a=0;a<n.length;a++){var i=n[a];try{if(null!==i.getAttribute("data-fp-omit"))continue;void 0!==i._flatpickr&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=O(i,t||{}),r.push(i._flatpickr)}catch(e){console.error(e)}}return 1===r.length?r[0]:r}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return N(this,e)},HTMLElement.prototype.flatpickr=function(e){return N([this],e)});var k=function(e,t){return"string"==typeof e?N(window.document.querySelectorAll(e),t):e instanceof Node?N([e],t):N(e,t)};return k.defaultConfig={},k.l10ns={en:e({},r),default:e({},r)},k.localize=function(t){k.l10ns.default=e({},k.l10ns.default,t)},k.setDefaults=function(t){k.defaultConfig=e({},k.defaultConfig,t)},k.parseDate=g({}),k.formatDate=b({}),k.compareDates=h,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return N(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=k),k}()},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=(0,wp.element.createContext)({});function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=wp.element,c=(o.createElement,o.useState),s=o.useEffect,u=o.Fragment,m=(o.render,o.useContext),p=wp.data,d=p.dispatch,f=p.select,v=function(e){var t=m(r),n=l(c([]),2),i=n[0],o=n[1],p=l(c(""),2),v=p[0],w=p[1],b=l(c(""),2),g=(b[0],b[1],l(c(f("vibebp").getToken()),2)),h=g[0],y=g[1],E=l(c(!0),2),_=E[0],O=E[1],N=l(c(!1),2),k=N[0],j=N[1];s(function(){_||-1!=document.querySelector("body").classList.contains("dark_vibebp")?document.querySelector("body").classList.remove("dark_vibebp"):document.querySelector("body").classList.add("dark_vibebp")},[_]),s(function(){window.vibebp.expanded_menu&&window.innerWidth>768&&j(!0),window.addEventListener("resize",function(){window.innerWidth>768&&j(!0)}),window.vibebp.dark_mode&&(O(!1),t.update("dark",!0))},[]),s(function(){window.vibebp.expanded_menu&&window.innerWidth>768&&j(!0)},[k]),s(function(){document.addEventListener("userLoaded",function(){h||y(f("vibebp").getToken())}),h&&(fetch("".concat(window.vibebp.api.url,"/profilemenu"),{method:"post",body:JSON.stringify({token:h})}).then(function(e){return e.json()}).then(function(e){e.status&&(o(e.menu),d("vibebp").setMenu(e.bpmenu))}),document.addEventListener("component_loaded",function(e){w(e.detail.component)}))},[h]),s(function(){if(i.length){if(!v){var e=i[0].css_id;"xprofile"===e&&(e="profile"),w(e)}if(-1!==window.location.href.indexOf("#")){var t=window.location.href.split("#");if(t.length>1){var n=t[1].split("&"),r=[];n.map(function(e,t){"component"===(r=e.split("="))[0]&&(f("vibebp").getComponent()||(i.map(function(e,t){e.css_id==r[1]&&C(t)}),d("vibebp").setComponent(r[1])))})}}}},[i]);var S=function(e){e.hasOwnProperty("css_id")?(d("vibebp").setComponent(e.css_id),d("vibebp").setAction(!1),d("vibebp").setId(!1)):d("vibebp").setComponent(e.type+"__"+e.object+"__"+e.object_id)},C=function(e){var t=a(i);t.map(function(e){e.classes.indexOf("is_active")>-1&&e.classes.splice(e.classes.indexOf("is_active"),1)}),t[e].classes.push("is_active"),o(t)};return wp.element.createElement("div",{className:k?"profile_menu active":"profile_menu",onMouseEnter:function(){window.vibebp.expanded_menu||j(!0)},onMouseLeave:function(){window.vibebp.expanded_menu||j(!1)}},wp.element.createElement("div",{className:"menu_items"},Array.isArray(i)&&i.length?i.map(function(e,t){if(e.menu_item_parent=parseInt(e.menu_item_parent),!e.menu_item_parent){"xprofile"===e.css_id&&(e.css_id="profile");var n=i.filter(function(t){return t.menu_item_parent===e.ID});return n.length&&-1===e.classes.indexOf("hasChildren")&&e.classes.push("hasChildren"),wp.element.createElement("div",{id:e.css_id,className:e.classes.join(" ")},wp.element.createElement("span",{className:"menu_item_"+e.css_id},e.classes.indexOf("external_link")>-1?wp.element.createElement("span",{onClick:function(){window.location.href=e.url}},wp.element.createElement("span",{className:"vicon vicon-new-window"}),wp.element.createElement("span",null,e.title)):wp.element.createElement(u,null,wp.element.createElement("span",{onClick:function(){S(e),j(!1),C(t)}},/svg/.test(e.icon)?wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:"icon "+e.icon}),wp.element.createElement("span",null,e.title)),n.length?wp.element.createElement("span",{class:"vicon vicon-angle-right",onClick:function(){var e=a(i);-1==e[t].classes.indexOf("open")?e[t].classes.push("open"):e[t].classes.splice(e[t].classes.indexOf("open"),1),o(e)}}):"")),n.length?wp.element.createElement("div",{className:"sub_nav_items"},n.map(function(e){return wp.element.createElement("div",{onClick:function(){S(e),j(!1),C(t)},className:e.classes.join(" ")},/svg/.test(e.icon)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.title))})):"")}}):""),wp.element.createElement("span",{className:k?"vicon vicon-angle-double-right reversed":"vicon vicon-angle-double-right",onClick:function(){return j(!k)}}),wp.element.createElement("div",{className:"menu_bottom"},_?wp.element.createElement("div",{className:"menu_item",onClick:function(){O(!1),t.update("dark",!0),j(!k)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.dark_mode}}),wp.element.createElement("span",null,window.vibebp.translations.dark_mode)):wp.element.createElement("div",{className:"menu_item",onClick:function(){O(!0),t.update("dark",!1)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.light_mode}}),wp.element.createElement("span",null,window.vibebp.translations.light_mode)),wp.element.createElement("div",{className:"menu_item",onClick:function(){f("vibebp").logout(),j(!1),document.querySelector("body").classList.add("vibebp_logout");var e=new CustomEvent("userLoaded",{detail:{userLoaded:!0}});document.dispatchEvent(e)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.logout}}),wp.element.createElement("span",null,window.vibebp.translations.logout))))};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach(function(t){g(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=wp.element,E=(y.createElement,y.useState),_=y.useEffect,O=y.Fragment,N=(y.render,y.useContext,wp.data),k=(N.dispatch,N.select),j=function(e){var t=h(E(!1),2),n=t[0],r=t[1],a=h(E(e.move),2),i=a[0],l=a[1],o=h(E([]),2),c=o[0],s=o[1],u=h(E({}),2),m=u[0],p=u[1],d=h(E(""),2),f=d[0],v=d[1];return _(function(){l(e.move)},[e.move]),_(function(){e.widget.link&&(r(!0),e.setloading(!0),fetch("".concat(e.widget.link),{method:"post",body:JSON.stringify({token:k("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(t){if(r(!1),t.status&&-1!=window.vibebp.components.dashboard.widgets.indexOf(t.widget.id_base)){v(t.widget.id_base),s(b({},t.widget,{link:e.widget.link})),e.update("defaultWidth",b({},t.widget,{link:e.widget.link}),e.all_widgets);var n=new CustomEvent(t.widget.id_base,{detail:{widget:t.widget}});document.dispatchEvent(n),e.setloading(!1)}}))},[e.widget.link]),_(function(){p(e.widget)},[e.widget]),wp.element.createElement("div",{class:"dashboard_widget dash_"+f},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(O,null,wp.element.createElement("div",{className:"dashboard_widget_header"},wp.element.createElement("span",{className:i?"vicon vicon-move":"vicon vicon-pin2",onClick:function(){return e.update("move",c,e.all_widgets)}}),wp.element.createElement("span",null,i?wp.element.createElement(O,null,m.hasOwnProperty("style")&&m.style.column>1?wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){return e.update("column_minus",c,e.all_widgets)}}):"",wp.element.createElement("span",{className:"vicon vicon-arrow-right",onClick:function(){return e.update("column",c,e.all_widgets)}}),m.hasOwnProperty("style")&&m.style.row>1?wp.element.createElement("span",{className:"vicon vicon-arrow-up",onClick:function(){return e.update("row_minus",c,e.all_widgets)}}):"",wp.element.createElement("span",{className:"vicon vicon-arrow-down",onClick:function(){return e.update("row",c,e.all_widgets)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return e.update("remove",c,e.all_widgets)}})):"")),c.hasOwnProperty("html")?wp.element.createElement(O,null,wp.element.createElement("div",{className:e.widget.id_base,dangerouslySetInnerHTML:{__html:c.html}})):f?wp.element.createElement("div",{className:f}):""))};function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=wp.element,P=(x.createElement,x.useState),D=x.useEffect,A=(x.useContext,x.Fragment),T=(x.render,wp.data),M=(T.dispatch,T.select,function(e){var t=C(P(),2),n=t[0],r=t[1],a=C(P([]),2),i=(a[0],a[1],C(P(-1),2)),l=i[0],o=i[1],c=C(P(!1),2),s=c[0],u=c[1],m=C(P(!1),2),p=m[0],d=m[1],f=C(P(!0),2),v=f[0],w=f[1],b=C(P([]),2),g=b[0],h=b[1];D(function(){r(e.widgets)},[e.widgets]);return wp.element.createElement(A,null,n?n.map(function(t,a){var i={},c={link:""};return"string"==typeof t?c.link=t:t&&t.hasOwnProperty("style")&&(i.gridColumn="span "+t.style.column,i.gridRow="span "+t.style.row,c=t),wp.element.createElement(A,null,wp.element.createElement("div",{className:"dashboard_widget_wrapper",ref:function(e){if(e&&!g[a]){var t=S(g);t[a]=e,h(t)}},"data-index":a,key:a,draggable:p&&!v,onDragStart:function(e){o(a)},onDragEnd:function(){o(!1),function(){if(s!==l){var t=S(n);(t=t.filter(function(e,t){return t!==l&&t!==s})).splice(s,0,n[l]),t.splice(l,0,n[s]),r(t),e.update(t)}}()},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),u(a)},style:i},wp.element.createElement(j,{widget:c,move:p,update:function(t,n,i){!function(t,n,a,i){if("move"!=t){if("remove"==t&&(i.splice(n,1),e.add({link:a.link,name:a.name,style:{row:1,column:1}})),"column"==t&&("string"==typeof i[n]?(i[n]={link:i[n]},i[n].style={row:1,column:1},i[n].style.column++):i[n].style.column++),"column_minus"==t&&i[n].style.column--,"row"==t&&("string"==typeof i[n]?(i[n]={link:i[n]},i[n].style={row:1,column:1},i[n].style.row++):i[n].style.row++),"row_minus"==t&&i[n].style.row--,"defaultWidth"==t){var l={id:a.id_base,name:a.name,description:a.description,link:a.link,style:{row:5,column:1}};a.options.hasOwnProperty("width")&&(a.options.width.indexOf("col-md-6")>-1&&(l.style={row:10,column:2}),a.options.width.indexOf("col-md-8")>-1&&(l.style.column=3,l.style.row=10),a.options.width.indexOf("col-md-12")>-1&&(l.style.column=4,l.style.row=10)),i.splice(n,1,l),r(i)}"defaultWidth"!=t&&(r(i),e.update(i))}else d(!p)}(t,a,n,i)},all_widgets:n,setloading:function(e){w(e)}})))}):"")});function I(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=wp.element,J=(F.createElement,F.useState),H=F.useEffect,Y=(F.useContext,F.Fragment),q=(F.render,wp.data),R=q.dispatch,U=q.select,W=function(e){var t=L(J(!1),2),n=t[0],r=t[1],a=L(J([]),2),i=a[0],l=a[1],o=L(J(""),2),c=o[0],s=o[1],u=L(J(!1),2),m=u[0],p=u[1],d=L(J([]),2),f=d[0],v=d[1];H(function(){document.querySelector("body").classList.value.indexOf("withsidebar")>-1&&document.querySelector("body").classList.remove("withsidebar"),r(!0),fetch("".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar),{method:"post",body:JSON.stringify({token:U("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&(l(e.widgets),e.unusedwidgets&&v(e.unusedwidgets)),r(!1)})},[]);return wp.element.createElement("div",{class:"dashboard"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i.length?wp.element.createElement(Y,null,wp.element.createElement(M,{widgets:i,add:function(e){var t=I(f);t.push(e),v(t)},update:function(e){fetch("".concat(window.vibebp.api.url,"/save_sidebar"),{method:"post",body:JSON.stringify({widgets:e,sidebar_id:window.vibebp.components.dashboard.sidebar,token:U("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&R("vibebp").addNotification({text:e.message})}),l(e)}}),f.length?wp.element.createElement("span",{className:"widget_move_spot"},m?wp.element.createElement("span",null,wp.element.createElement("select",{onChange:function(e){var t=I(i),n=I(f);t.push(e.target.value),l(t),n.splice(n.findIndex(function(t){return t.link==e.target.value}),1),v(n),s(""),p(!1)},value:c},wp.element.createElement("option",null,window.vibebp.translations.select_widget),f.map(function(e){return wp.element.createElement("option",{value:e.link},e.name)})),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){p(!1)}})):wp.element.createElement("span",{className:"vicon vicon-plus",onClick:function(){p(!0)}})):""):wp.element.createElement("div",{className:"vibebp_message"},window.vibebp.translations.empty_dashboard))};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){B(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=wp.element,G=(V.createElement,V.useState),Q=V.useEffect,Z=V.useRef,X=V.Fragment,ee=(V.render,wp.data),te=(ee.dispatch,ee.select,Math.round(100*Math.random())),ne=function(e){var t=Z(null),n=React.createRef(),r=K(G(!0),2),a=r[0],i=r[1],l=K(G(!1),2),o=l[0],c=l[1],s=K(G(!1),2),u=s[0],m=s[1],p=K(G(""),2),d=p[0],f=p[1],v=K(G(""),2),w=v[0],b=v[1],g=K(G(""),2),h=(g[0],g[1]),y=K(G(""),2),E=y[0],_=y[1],O=K(G({x:0,y:0,width:0,height:0,type:"image"}),2),N=O[0],k=O[1],j=K(G(window.vibebp.translations.select_image),2),S=j[0],C=j[1];Q(function(){e.hasOwnProperty("crop")&&e.crop&&c(!0)},[]),Q(function(){if(u&&o){var t=n.current;new Croppr(t,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(t){var n=$({},N);n.x=t.x,n.y=t.y,n.height=t.height,n.width=t.width,k(n);var r={x:t.x,y:t.y,width:t.width,height:t.height};e.update(E,r)}})}},[u]);return wp.element.createElement("div",{className:"uploader"},a?wp.element.createElement("label",{for:"fileupload_"+te,className:"upload_file"},S,"image"==e.type?wp.element.createElement("input",{id:"fileupload_"+te,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(f(window.URL.createObjectURL(t.current.files[0])),i(!1),_(t.current.files),e.update(t.current.files,$({},N,{key:"image"}))):(C(window.vibebp.translations.image_size_error),setTimeout(function(){C(window.vibebp.translations.select_image)},3500))}}):"video"==e.type?wp.element.createElement("input",{id:"fileupload_"+te,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(b(window.URL.createObjectURL(t.current.files[0])),i(!1),_(t.current.files),e.update(t.current.files,$({},N,{key:"video"}))):(C(window.vibebp.translations.image_size_error),setTimeout(function(){C(window.vibebp.translations.select_image)},3500))}}):wp.element.createElement("input",{id:"fileupload_"+te,"data-type":e.type,ref:t,type:"file",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(h(window.URL.createObjectURL(t.current.files[0])),i(!1),_(t.current.files),e.update(t.current.files,$({},N,{key:"attachment"}))):(C(window.vibebp.translations.image_size_error),setTimeout(function(){C(window.vibebp.translations.select_image)},3500))}})):wp.element.createElement("div",{className:"uploaded_src"},"image"==e.type?wp.element.createElement(X,null,o?wp.element.createElement(X,null,wp.element.createElement("div",{className:"uploaded_image"},wp.element.createElement("img",{src:d})),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){m(!u)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){c(!1),i(!0),setImgRef(""),f(""),k({x:0,y:0,width:0,height:0})}})),u?wp.element.createElement("div",{className:"cropimage",id:"cropper"},wp.element.createElement("img",{src:d,ref:n})):""):wp.element.createElement("img",{src:d})):"video"==e.type?wp.element.createElement(X,null,wp.element.createElement("video",{className:"content_to_html_video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:w,type:"video/mp4"}))):wp.element.createElement(X,null,wp.element.createElement("i",{className:"vicon vicon-clip"}))))};function re(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach(function(t){le(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce=wp.element,se=(ce.createElement,ce.useState),ue=ce.useEffect,me=ce.Fragment,pe=(ce.render,wp.data),de=pe.dispatch,fe=pe.select,ve=function(e){var t=oe(se([]),2),n=t[0],r=t[1],a=oe(se([]),2),i=a[0],l=a[1],o=oe(se(""),2),c=o[0],s=o[1],u=oe(se({content:"",component:"activity",component_id:"",parent_id:"",meta:[]}),2),m=u[0],p=u[1];ue(function(){e.hasOwnProperty("activity_id")&&p({content:"",component:"activity_comment",component_id:e.comment_id,parent_id:e.activity_id,meta:[]}),e.hasOwnProperty("component")&&"personal"!=e.component&&p(ie({},m,{component:e.component,component_id:e.id}))},[]),ue(function(){m.component.length&&"activity"!==m.component&&"activity_comment"!==m.component&&fetch("".concat(window.vibebp.api.url,"/").concat(m.component,"/user/").concat(fe("vibebp").getUser().id,"/get_items"),{method:"post",body:JSON.stringify({token:fe("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&Array.isArray(e.groups)&&r(e.groups)})},[m.component]);return wp.element.createElement("div",{className:"portal activity_post"},wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("textarea",{placeholder:window.vibebp.translations.whats_new,onChange:function(e){var t=ie({},m);t.content=e.target.value,p(t)}},m.content)),wp.element.createElement("div",{className:"portal_footer"},e.hasOwnProperty("activity_id")?"":"activity"!==m.component?"":wp.element.createElement("div",{className:"footer_main"},wp.element.createElement("select",{value:m.component,onChange:function(e){var t=ie({},m);t.component=e.target.value,p(t)}},Object.keys(window.vibebp.components.activity.post.components).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.post.components[e])})),n.length?wp.element.createElement("select",{value:m.component_id,onChange:function(e){var t=ie({},m);t.component_id=e.target.value,p(t)}},wp.element.createElement("option",null,window.vibebp.translations.select_component),n.map(function(e){return wp.element.createElement("option",{value:e.id},e.label)})):""),wp.element.createElement("div",{className:"footer_links"},i.length?i.map(function(e,t){return wp.element.createElement(me,null,"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(ne,{type:e,update:function(n,r){var a=re(c);a[t]=new File([n[0]],n[0].name),s(a),p(ie({},m,{meta:[].concat(re(m.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=re(i);e.splice(t,1);var n=re(c);n.splice(t,1),s(n),l(e)}}))}):"",wp.element.createElement(me,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){var e=re(i);e.push("attachment"),l(e)}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){var e=re(i);e.push("video"),l(e)}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){var e=re(i);e.push("image"),l(e)}})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){if(m.content.length){var t=new FormData;t.append("body",JSON.stringify({args:m,token:fe("vibebp").getToken()})),c.length&&c.map(function(e,n){t.append("files_"+n,e)}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/add"),{method:"post",body:t}).then(function(e){return e.json()}).then(function(t){t.status&&(e.update(t.activity,"add"),p(ie({},m,{content:"",meta:[]})),s([]),de("vibebp").addNotification({text:t.activity.action}))})}}},window.vibebp.translations.post_update),e.hasOwnProperty("activity_id")?wp.element.createElement("a",{className:"button is-text",onClick:function(){e.update("","cancel")}},window.vibebp.translations.cancel):"")))};function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=wp.element,ge=(be.createElement,be.useState),he=be.useEffect,ye=(be.Fragment,be.render,function(e){var t=we(ge(""),2),n=t[0],r=t[1],a=we(ge({s:0,m:0,h:0,d:0,w:0,mn:0,y:0}),2),i=a[0],l=a[1];he(function(){o()},[e.time]),he(function(){var e=setInterval(function(){o(),r(n+60)},6e4);return function(){return clearInterval(e)}},[]);var o=function(){var t={s:0,m:0,h:0,d:0,mn:0,y:0},n=Math.floor(((new Date).getTime()-Date.parse(e.time)+6e4*(new Date).getTimezoneOffset())/1e3);n>31536e3&&(t.y=Math.floor(n/31536e3),n-=86400*t.y*365),n>2592e3&&(t.mn=Math.floor(n/2592e3),n-=86400*t.mn*30),n>604800&&(t.w=Math.floor(n/604800),n-=86400*t.w*7),n>86400&&(t.d=Math.floor(n/86400),n-=86400*t.d),n>3600&&(t.h=Math.floor(n/3600),n-=3600*t.h),n>60&&(t.m=Math.floor(n/60),n-=60*t.m),t.s=n,l(t)};return wp.element.createElement("div",{className:"datetime"},i.y||i.mn||i.w||i.d||i.h||i.m?"":window.vibebp.translations.justnow,i.y?wp.element.createElement("span",{className:"years"},i.y," ",i.y>1?window.vibebp.translations.years:window.vibebp.translations.year):"",i.mn?wp.element.createElement("span",{className:"months"},i.mn," ",i.mn>1?window.vibebp.translations.months:window.vibebp.translations.month):"",i.w?wp.element.createElement("span",{className:"weeks"},i.w," ",i.w>1?window.vibebp.translations.weeks:window.vibebp.translations.week):"",i.d?wp.element.createElement("span",{className:"days"},i.d," ",i.d>1?window.vibebp.translations.days:window.vibebp.translations.day):"",i.h?wp.element.createElement("span",{className:"hours"},i.h," ",i.h>1?window.vibebp.translations.hours:window.vibebp.translations.hour):"",i.m?wp.element.createElement("span",{className:"minutes"},i.m," ",i.m>1?window.vibebp.translations.minutes:window.vibebp.translations.minute):"")});function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var je=wp.element,Se=(je.createElement,je.useState),Ce=je.useEffect,xe=je.Fragment,Pe=(je.render,wp.data),De=Pe.dispatch,Ae=Pe.select,Te=function e(t){var n=ke(Se({}),2),r=n[0],a=n[1],l=ke(Se(!1),2),o=l[0],c=l[1],s=ke(Se(!1),2),u=s[0],m=s[1],p=ke(Se(!1),2),d=p[0],f=p[1],v=ke(Se([]),2),w=v[0],b=v[1];Ce(function(){a(t.activity),localforage.getItem("favorite_activities_"+Ae("vibebp").getUser().id).then(function(e){e&&(e=JSON.parse(e),f(e))}),localforage.getItem("liked_activities_"+Ae("vibebp").getUser().id).then(function(e){e&&(e=JSON.parse(e),b(e))})},[t.activity]);r.hasOwnProperty("date_recorded")||(r.date_recorded=(new Date).getTime());var g="activity_item "+r.type+" "+r.component;return r.hasOwnProperty("content")&&r.content.length&&(g+=" with_activity_content"),o&&(g+=" removed"),wp.element.createElement("div",{className:g,"data-activity-id":r.id},wp.element.createElement("div",{className:"activity_avatar"},wp.element.createElement("img",{src:r.avatar})),wp.element.createElement("div",{className:"activity_body"},wp.element.createElement("div",{className:"activity_header"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.action}})),r.hasOwnProperty("content")&&r.content.length?wp.element.createElement("div",{className:"activity_content"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.content}}),wp.element.createElement("div",{className:"activity_attachments"},r.hasOwnProperty("meta")&&Object.keys(r.meta).length?Object.keys(r.meta).map(function(e){return wp.element.createElement(xe,null,r.meta[e].map(function(t){if(t&&t.length>3){if("image"==e)return wp.element.createElement("img",{src:t,className:"activity_meta image"});if("video"==e)return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{className:"activity_meta video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"video/mp4"})));if("audio"==e)return wp.element.createElement("audio",{className:"activity_meta audio",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"audio/mp3"}));if("attachment"==e)return wp.element.createElement("a",{href:t,target:"_blank",className:"vicon vicon-clip activity_meta"})}}))}):"")):"",wp.element.createElement(ye,{time:r.date_recorded}),wp.element.createElement("div",{className:"activity_actions"},window.vibebp.settings.likes?wp.element.createElement("a",{className:-1===w.indexOf(r.id)?"vicon vicon-thumb-up":"vicon vicon-thumb-up filled",onClick:function(){var e=[],n=-1;w&&(e=Ne(w),n=w.indexOf(r.id));var a="add-like";-1===n?e.push(r.id):(a="remove-like",t.update(r,"remove-like"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a),{method:"post",body:JSON.stringify({activity_id:r.id,token:Ae("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(t){t.hasOwnProperty("message")&&De("vibebp").addNotification({text:t.message}),localforage.setItem("liked_activities_"+Ae("vibebp").getUser().id,JSON.stringify(e))}),b(e)}}):"",wp.element.createElement("a",{className:r.hasOwnProperty("children")&&r.children?"vicon vicon-comment-alt":"vicon vicon-comment",onClick:function(){m(!u)}}),wp.element.createElement("a",{className:d&&-1!==d.indexOf(r.id)?"vicon vicon-star filled":"vicon vicon-star",onClick:function(){var e=[],n=-1;d&&(e=Ne(d),n=d.indexOf(r.id));var a="add-favorite";-1===n?e.push(r.id):(a="remove-favorite",t.update(r,"remove-favorite"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a),{method:"post",body:JSON.stringify({activity_id:r.id,token:Ae("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(t){t.hasOwnProperty("message")&&De("vibebp").addNotification({text:t.message}),localforage.setItem("favorite_activities_"+Ae("vibebp").getUser().id,JSON.stringify(e)),f(e)})}}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/remove"),{method:"post",body:JSON.stringify({activity_id:r.id,parent_id:t.rootActivityId,token:Ae("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("message")&&De("vibebp").addNotification({text:e.message})}),c(!0),t.update(r,"remove")}})),u?wp.element.createElement(ve,{activity_id:t.rootActivityId,update:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach(function(t){Oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r);("add"===t&&(n.children?n.children[Object.keys(n.children).length]=e:("object"===Ee(n.children)&&null!==n.children||(n.children={}),n.children[0]=e),m(!1),a(n)),"remove"===t)&&(-1!==Object.keys(n.children).findIndex(function(t){return n.children[t].id===e.id})&&(delete n.children[i],a(n)));"cancel"===t&&m(!1)},comment_id:r.id}):"",r.hasOwnProperty("children")&&r.children?wp.element.createElement("div",{class:"activity_list"},Object.keys(r.children).map(function(n){return wp.element.createElement(e,{activity:r.children[n],rootActivityId:t.rootActivityId})})):""))};function Me(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach(function(t){Fe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var He=wp.element,Ye=(He.createElement,He.useState),qe=He.useEffect,Re=(He.Fragment,He.render,wp.data),Ue=Re.dispatch,We=Re.select,ze=function(e){var t=Je(Ye([]),2),n=t[0],r=t[1],a=Je(Ye({}),2),i=a[0],l=a[1],o=Je(Ye(!1),2),c=o[0],s=o[1],u=Je(Ye(!0),2),m=u[0],p=u[1],d=Je(Ye(!1),2),f=d[0],v=d[1],w=Je(Ye([]),2),b=w[0],g=w[1];qe(function(){"personal"===e.type&&l({filter:"just-me",search:"",sorter:"",page:1}),"groups"===e.type&&l({filter:"groups",item_id:e.id,search:"",sorter:"",page:1}),"course"===e.type&&l({filter:"course",item_id:e.id,search:"",sorter:"",page:1});var t=We("vibebp").getMenu().filter(function(e){return"activity"===e.parent_slug});window.vibebp.settings.followers&&t.push({class:["menu-child"],css_id:"activity-following",name:window.vibebp.translations.following,parent:"activity"}),window.vibebp.settings.likes&&t.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}),t.map(function(e,n){if(-1===t.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})){t[n].class.push("current-menu-item");var r=new CustomEvent("action_loaded",{detail:{component:window.vibebp.api.endpoints.activity,action:t[n].class}});document.dispatchEvent(r)}});var n=We("vibebp").getUser();n.caps.hasOwnProperty("manage_options")&&t.push({class:["menu-child"],css_id:"all_activity",name:window.vibebp.translations.site_activity,parent:"activity"}),t.map(function(e,r){e.hasOwnProperty("caps")&&(n.caps.hasOwnProperty(e.caps)||t.splice(r,1))}),g(t),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),qe(function(){if(Object.keys(i).length){var e=Le({},i);e.token=We("vibebp").getToken(),navigator.onLine,p(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity),{method:"post",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(p(!1),e.status){var t=[];if(f)t=Me(n),e.data.activities.map(function(e){t.push(e)}),v(!1);else{if("activity-favs"===i.filter){var a=[];localforage.getItem("favorite_activities_"+We("vibebp").getUser().id).then(function(t){t&&((t=JSON.parse(t))&&t.length&&(a=Me(t)),e.data.activities.map(function(e){-1===a.indexOf(e.id)&&a.push(e.id)}),localforage.setItem("favorite_activities_"+We("vibebp").getUser().id,JSON.stringify(a)))})}if("activity-likes"===i.filter){var l=[];localforage.getItem("liked_activities_"+We("vibebp").getUser().id).then(function(t){t&&((t=JSON.parse(t))&&t.length&&(l=Me(t)),e.data.activities.map(function(e){-1===l.indexOf(e.id)&&l.push(e.id)}),localforage.setItem("liked_activities_"+We("vibebp").getUser().id,JSON.stringify(l)))})}t=e.data.activities}r(t),s(e.data.has_more_items)}else e.hasOwnProperty("message")&&Ue("vibebp").addNotification({text:e.message})})}},[i]);var h=function(e,t){var a=Me(n);if("remove"===t||"remove-favorite"==t&&"activity-favs"==i.filter){var l=Me(n),o=l.findIndex(function(t){return t.id===e.id});-1!==o&&(l.splice(o,1),r(l))}"add"===t&&(a.unshift(e),r(a))};return wp.element.createElement("div",{className:"vibebp_sidebars"},"personal"===e.type?wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.activity.label),b.map(function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(n){var r=Le({},i);r.filter=e.css_id,r.page=1,l(r);var a=Me(b),o=a.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});a[o].class.splice(a[o].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),g(a)}},e.name)}))):"",wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement(ve,{component:e.type,id:e.id,update:h}),wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=Le({},i);t.search=e.target.value,t.page=1,l(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){return t=e.target.value,void l(Le({},i,{sorter:t}));var t}},Object.keys(window.vibebp.components.activity.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.sorters[e])})))),wp.element.createElement("div",{className:"portal_body"},m?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):n.length?wp.element.createElement("div",{className:"activity_list"},n.map(function(e){return wp.element.createElement(Te,{activity:e,rootActivityId:e.id,update:h})}),c?wp.element.createElement("a",{className:"link",onClick:function(){var e=Le({},i);e.page=i.page+1,v(!0),l(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found)))))};function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Be=wp.element,Ke=(Be.createElement,Be.useState),Ve=Be.useEffect,Ge=(Be.Fragment,Be.render,wp.data),Qe=(Ge.dispatch,Ge.select),Ze=function(e){var t=$e(Ke(!1),2),n=t[0],r=t[1],a=$e(Ke(""),2),i=a[0],l=a[1];return Ve(function(){r(!0);var t={token:Qe("vibebp").getToken()};e.hasOwnProperty("id")&&(t.id=e.id),fetch("".concat(window.vibebp.api.url,"/profile/"),{method:"post",body:JSON.stringify({token:Qe("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),l(e)})},[]),wp.element.createElement("div",{className:"user_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:i}}))};function Xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var et=wp.element,tt=(et.createElement,et.useRef),nt=et.useEffect,rt=(et.Fragment,et.render,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=tt(Date.now());nt(function(){var n=setTimeout(function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())},t-(Date.now()-r.current));return function(){clearTimeout(n)}},[t].concat(Xe(n)))}),at=function(e){try{JSON.parse(e)}catch(e){return!1}return!0};function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(n,!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ut=wp.element,mt=(ut.createElement,ut.useState),pt=ut.useEffect,dt=(ut.Fragment,ut.render,wp.data),ft=dt.dispatch,vt=dt.select,wt=function(e){var t=st(mt(!0),2),n=(t[0],t[1],st(mt(e.field),2)),r=n[0],a=(n[1],st(mt(!1),2)),i=a[0],l=a[1],o=st(mt({icon:"",url:""}),2),c=o[0],s=o[1],u=st(mt([]),2),m=u[0],p=u[1];pt(function(){"string"==typeof e.field.value&&e.field.value.length&&p(JSON.parse(e.field.value))},[]);var d,f=function(e){console.log(m),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save"),{method:"post",body:JSON.stringify({field_id:r.id,value:JSON.stringify(e),token:vt("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){ft("vibebp").addNotification({text:e.message})})};return wp.element.createElement("div",{className:"vibebp_profile_field social"},m.length?wp.element.createElement("div",{className:"social_icons_list"},m.map(function(e,t){return wp.element.createElement("div",{className:"social_icon_wrapper"},wp.element.createElement("div",{className:"social_icon"},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.url)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=ct(m);e.splice(t,1),p(e),f(e)}}))})):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){l(!i)}}),i?wp.element.createElement("div",{className:"add_social_icon"},wp.element.createElement("div",{className:"social_icons"},window.vibebp.social_icons.map(function(e){return wp.element.createElement("div",{className:c.icon===e.icon?"social_icon selected":"social_icon",onClick:function(){s(lt({},c,{icon:e.icon}))}},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.label))})),wp.element.createElement("div",{className:!c.url.length||(d=c.url,/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(d))?"social_icon_url":"social_icon_url error"},wp.element.createElement("input",{type:"text",onChange:function(e){s(lt({},c,{url:e.target.value}))},value:c.url})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){if(c.url.length){var e=ct(m);e.push(c),p(e),l(!1),s({icon:"",url:""}),f(e)}}},window.vibebp.translations.set_icon)):"")};function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(n,!0).forEach(function(t){ht(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _t=wp.element,Ot=(_t.createElement,_t.useState),Nt=_t.useEffect,kt=(_t.Fragment,_t.render,wp.data),jt=kt.dispatch,St=kt.select,Ct=function(e){var t=Et(Ot(!0),2),n=(t[0],t[1],Et(Ot(e.field),2)),r=n[0],a=(n[1],Et(Ot(!1),2)),i=a[0],l=a[1],o=Et(Ot({icon:"",title:"",description:""}),2),c=o[0],s=o[1],u=Et(Ot([]),2),m=u[0],p=u[1];Nt(function(){"string"==typeof e.field.value&&e.field.value.length&&p(JSON.parse(e.field.value))},[]);var d=function(e){console.log(m),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save"),{method:"post",body:JSON.stringify({field_id:r.id,value:JSON.stringify(e),token:St("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){jt("vibebp").addNotification({text:e.message})})};return wp.element.createElement("div",{className:"vibebp_profile_field repeatable"},m.length?wp.element.createElement("div",{className:"repeatable_icons_list"},m.map(function(e,t){return wp.element.createElement("div",{className:"repeatable_icon_wrapper"},wp.element.createElement("div",{className:"repeatable_icon"},e.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,wp.element.createElement("h4",null,e.title),wp.element.createElement("p",null,e.description))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=yt(m);e.splice(t,1),p(e),d(e)}}))})):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){l(!i)}}),i?wp.element.createElement("div",{className:"add_repeatable_icon"},wp.element.createElement("div",{className:"repeatable_icons"},window.vibebp.repeatable_icons.map(function(e){if(!(e.length>100))return wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(gt({},c,{icon:e}))}},wp.element.createElement("span",{className:e}));wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(gt({},c,{icon:e}))}},wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e}}))})),wp.element.createElement("div",{className:"repeatable_title"},c.icon?c.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:c.icon}}):wp.element.createElement("span",{className:c.icon}):"",wp.element.createElement("span",null,wp.element.createElement("input",{type:"text",onChange:function(e){s(gt({},c,{title:e.target.value}))},value:c.title,placeholder:window.vibebp.translations.title}),wp.element.createElement("input",{type:"text",onChange:function(e){s(gt({},c,{description:e.target.value}))},value:c.description,placeholder:window.vibebp.translations.description}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){if(c.title.length){var e=yt(m);e.push(c),p(e),l(!1),s({icon:"",title:"",description:""}),d(e)}}},window.vibebp.translations.set_icon)):"")};function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(n,!0).forEach(function(t){Dt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Mt=wp.element,It=(Mt.createElement,Mt.useState),Lt=Mt.useEffect,Ft=(Mt.Fragment,Mt.render,wp.data),Jt=Ft.dispatch,Ht=Ft.select,Yt=function(e){var t=Tt(It(!0),2),n=t[0],r=t[1],a=Tt(It(e.field),2),i=a[0],l=a[1],o=Tt(It(),2),c=o[0],s=o[1],u=Tt(It(),2),m=u[0],p=u[1],d=Tt(It(),2),f=d[0],v=d[1],w=Tt(It(),2),b=w[0],g=w[1],h=Tt(It(""),2),y=h[0],E=h[1],_=Tt(It([]),2),O=_[0],N=_[1];rt(function(){n||e.field.value===i.value||fetch("".concat(window.vibebp.api.url,"/xprofile/field/save"),{method:"post",body:JSON.stringify({field_id:i.id,type:"location",value:i.value,token:Ht("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("message")&&Jt("vibebp").addNotification({text:e.message})})},500,[i.value]),rt(function(){if(!n){var e=new google.maps.places.AutocompleteService;y.length&&e.getQueryPredictions({input:y},function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){var n=At(O);e.forEach(function(e){n.push(e.description)}),N(n)}})}},500,[y]),Lt(function(){if(c)if(window.hasOwnProperty("google")&&window.google.hasOwnProperty("maps")){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);p(n);var a=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP});v(a),r(!1),g(new google.maps.Geocoder)}else{var i=window.document.createElement("script");i.src="https://maps.googleapis.com/maps/api/js?key=".concat(window.vibebp.settings.google_maps_api_key,"&libraries=places"),i.async=!0,window.document.body.appendChild(i),i.addEventListener("load",function(){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);p(n);var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},i=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});v(i),r(!1),g(new google.maps.Geocoder)})}},[c]),Lt(function(){if(!n){if(i.value){var e=i.value;if(Array.isArray(e)||e.split(","),e.length){var t=Pt({},i);6===e.length&&(t.value={lat:e[0],lng:e[1],address:e[2],zipcode:e[3],city:e[4],country:e[5]});var r=new google.maps.LatLng(e[0],e[1]);l(t),m.setCenter(r),f.setPosition(r)}}else j();window.google.maps.event.addListener(f,"dragend",function(e){(new google.maps.Geocoder).geocode({location:e.latLng},function(e,t){"OK"==t&&(console.log(e),m.setCenter(e[0].geometry.location),l(Pt({},i,{value:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng(),address:e[0].formatted_address,zipcode:e[0].address_components[e[0].address_components.findIndex(function(e){return-1!==e.types.indexOf("postal_code")})].long_name,city:e[0].address_components[e[0].address_components.findIndex(function(e){return-1!==e.types.indexOf("locality")})].long_name,country:e[0].address_components[e[0].address_components.findIndex(function(e){return-1!==e.types.indexOf("country")})].long_name}})))})})}},[n]);var k=function(){b&&(new google.maps.Geocoder).geocode({address:y},function(e,t){"OK"==t&&(m.setCenter(e[0].geometry.location),f.setPosition(e[0].geometry.location)),N([])})},j=function(){console.log("...locating"),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(e){var t=Pt({},i);console.log(e),t.value=[e.coords.latitude,e.coords.longitude],l(t);var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);console.log(n),m.setCenter(n),f.setPosition(n)})};return wp.element.createElement("div",{className:"vibebp_profile_field location"},wp.element.createElement("div",{className:"search_me"},wp.element.createElement("span",{className:"vicon vicon-target",onClick:j}),wp.element.createElement("input",{type:"text",value:y,onChange:function(e){E(e.target.value)}}),y.length?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){E(""),N([])}}):"",wp.element.createElement("span",{className:y.length?"vicon vicon-search is_active":"vicon vicon-search",onClick:k})),O.length?wp.element.createElement("div",{className:"vibebp_autocomplete_results"},O.map(function(e){return wp.element.createElement("div",{className:"vibebp_autocomplete_result",onClick:function(){E(e),N([]),k()}},e)})):"",wp.element.createElement("div",{className:"google_map_locator"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{ref:function(e){e&&!c&&s(e)},style:{height:"400px",width:"100%"}})),wp.element.createElement("div",{className:"google_map_details"},wp.element.createElement("textarea",{placeholder:window.vibebp.translations.address,onChange:function(e){l(Pt({},i,{value:Pt({},i.value,{address:e.target.value})}))},value:i.value.hasOwnProperty("address")?i.value.address:""}),wp.element.createElement("div",{className:"gmap_fields"},wp.element.createElement("input",{type:"text",onChange:function(e){l(Pt({},i,{value:Pt({},i.value,{zipcode:e.target.value})}))},placeholder:window.vibebp.translations.zipcode,value:i.value.hasOwnProperty("zipcode")?i.value.zipcode:""}),wp.element.createElement("input",{type:"text",onChange:function(e){l(Pt({},i,{value:Pt({},i.value,{city:e.target.value})}))},placeholder:window.vibebp.translations.city,value:i.value.hasOwnProperty("city")?i.value.city:""}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.country,value:i.value.hasOwnProperty("country")?i.value.country:""}))))};function qt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach(function(t){Wt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $t=wp.element,Bt=($t.createElement,$t.useState),Kt=$t.useEffect,Vt=($t.Fragment,$t.render,wp.data),Gt=Vt.dispatch,Qt=Vt.select,Zt=function(e){var t=zt(Bt(!1),2),n=t[0],r=t[1],a=zt(Bt(!1),2),i=a[0],l=a[1],o=zt(Bt(e.field),2),c=o[0],s=o[1];Kt(function(){"checkbox"!=c.type&&"selectbox"!=c.type&&"radio"!=c.type&&"multiselect"!=c.type&&"location"!=c.type||fetch("".concat(window.vibebp.api.url,"/xprofile/field/options"),{method:"post",body:JSON.stringify({field_id:c.id,type:c.type,token:Qt("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&s(Ut({},c,{options:e.values}))});var e=new CustomEvent("field_loaded",{detail:{field:c}});document.dispatchEvent(e)},[]),rt(function(){n&&(l(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save"),{method:"post",body:JSON.stringify({field_id:c.id,type:c.type,value:c.value,token:Qt("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){l(!1),e.hasOwnProperty("message")&&Gt("vibebp").addNotification({icon:e.status?"vicon vicon-check-box":"vicon vicon-alert",text:e.message})}))},1500,[c.value,n]);var u=function(e){var t=Ut({},c);if(e&&e.length){var n=e[0].getDate();(n=n.toString()).length<2&&(n="0"+n);var a=e[0].getMonth()+1;(a=a.toString()).length<2&&(a="0"+a);var i=e[0].getFullYear()+"-"+a+"-"+n;t.value=i}else t.value="";s(t),r(!0)};return wp.element.createElement("div",{className:i?"vibebp_form_field control is-loading":"vibebp_form_field control"},wp.element.createElement("label",null,c.name," ",wp.element.createElement("span",null,window.vibebp.components.xprofile.visibility[c.visibility])),"textbox"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}}):"number"===c.type?wp.element.createElement("input",{type:"number",value:c.value,onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}}):"telephone"===c.type?wp.element.createElement("input",{type:"number",value:c.value,onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}}):"url"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}}):"textarea"===c.type?wp.element.createElement("textarea",{onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}},c.value):"selectbox"===c.type?wp.element.createElement("select",{onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)},value:c.value},c.hasOwnProperty("options")?c.options.map(function(e,t){return wp.element.createElement("option",{value:e.name},e.name)}):""):"radio"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map(function(e,t){return wp.element.createElement("div",{className:"radio"},wp.element.createElement("input",{id:e.id,type:"radio",value:e.name,checked:c.value===e.name,onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)}}),wp.element.createElement("label",{for:e.id},e.name))}):""):"checkbox"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map(function(e,t){return wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:e.id,value:e.name,checked:-1!==c.value.indexOf(e.name),onChange:function(t){if(c.value&&-1===c.value.indexOf(e.name)){var n=qt(c.value);n.push(e.name),s(Ut({},c,{value:n}))}else{var a=qt(c.value);a.splice(c.value.indexOf(e.name),1),s(Ut({},c,{value:a}))}r(!0)}}),wp.element.createElement("label",{for:e.id},e.name))}):""):"multiselectbox"===c.type?wp.element.createElement("select",{onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)},value:c.value,multiple:!0},c.hasOwnProperty("options")?c.options.map(function(e,t){return wp.element.createElement("option",{value:e.name},e.name)}):""):"datebox"===c.type?wp.element.createElement("input",{type:"text",ref:function(e){if(e){var t={altInput:!0,dateFormat:"Y-m-d",defaultDate:c.hasOwnProperty("value")&&c.value.length?c.value:[],onChange:u};flatpickr(e,t)}}}):"country"===c.type?wp.element.createElement("select",{onChange:function(e){s(Ut({},c,{value:e.target.value})),r(!0)},value:c.value},Object.keys(window.vibebp.components.xprofile.countries).length?Object.keys(window.vibebp.components.xprofile.countries).map(function(e,t){return wp.element.createElement("option",{value:e},window.vibebp.components.xprofile.countries[e])}):""):"color"===c.type?wp.element.createElement("span",{className:"vibebp_color_field",style:{background:c.value},ref:function(e){new Picker(e).onChange=function(t){e.style.background=t.rgbaString,s(Ut({},c,{value:t.rgbaString})),r(!0)}}}):"location"===c.type?wp.element.createElement(Yt,{field:c}):"social"===c.type?wp.element.createElement(wt,{field:c}):"repeatable"===c.type?wp.element.createElement(Ct,{field:c}):"")};function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nn=wp.element,rn=(nn.createElement,nn.useState),an=nn.useEffect,ln=nn.Fragment,on=(nn.render,wp.data),cn=(on.dispatch,on.select),sn=function(e){var t=tn(rn(!1),2),n=t[0],r=t[1],a=tn(rn({avatar:{},groups:[],fields:[],cover:{}}),2),i=a[0],l=a[1];return an(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/allfields"),{method:"post",body:JSON.stringify({token:cn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){if(r(!1),e.status){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(n,!0).forEach(function(t){en(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i);t.groups=e.groups,t.fields=e.fields,l(t)}})},[]),wp.element.createElement("div",{className:"edit_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(ln,null,i.groups.length?i.groups.map(function(e){if(i.fields.filter(function(t){return t.group_id==e.id}).length)return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,e.name)),wp.element.createElement("div",{className:"portal_body"},i.fields.filter(function(t){return t.group_id==e.id}).length?wp.element.createElement("ul",{className:"vibebp_form"},i.fields.filter(function(t){return t.group_id==e.id}).map(function(e){return wp.element.createElement(Zt,{field:e})})):""))}):""))};function un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mn=wp.element,pn=(mn.createElement,mn.useState),dn=mn.useEffect,fn=(mn.Fragment,mn.render,wp.data),vn=fn.dispatch,wn=fn.select,bn=function(e){var t=un(pn(!1),2),n=t[0],r=t[1],a=un(pn(""),2),i=a[0],l=a[1],o=un(pn(""),2),c=o[0],s=o[1],u=un(pn({}),2),m=u[0],p=u[1],d=un(pn(!1),2),f=d[0],v=d[1],w=un(pn(!1),2),b=w[0],g=w[1],h=wn("vibebp").getUser();dn(function(){localforage.getItem("user_"+h.id).then(function(e){null!==e?(e=JSON.parse(e),l(e.avatar)):fetch("".concat(window.vibebp.api.url,"/avatar"),{method:"post",body:JSON.stringify({type:"user",ids:h.id,token:wn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&(localforage.setItem("user_"+h.id,JSON.stringify(e.value)),l(e.value))})})},[]);return wp.element.createElement("div",{className:"profile_avatar_wrapper"},wp.element.createElement("div",{className:"profile_avatar"},n?wp.element.createElement(ne,{type:"image",crop:"1",update:function(e,t){console.log(t),g(!0),s(e[0]),p(t)}}):wp.element.createElement("img",{src:i})),wp.element.createElement("div",{className:"profile_avatar_actions buttons"},wp.element.createElement("a",{className:n?"button is-danger":"button is-info",onClick:function(){r(!n)}},n?window.vibebp.translations.cancel:window.vibebp.translations.change_image),b?wp.element.createElement("a",{className:f?"button is-loading is-primary":"button is-primary",onClick:function(){v(!0);var e={cropdata:m,token:wn("vibebp").getToken()},t=new FormData;t.append("body",JSON.stringify(e)),t.append("file",c),fetch("".concat(window.vibebp.api.url,"/profile/avatar"),{method:"post",body:t}).then(function(e){return e.json()}).then(function(e){if(v(!1),e.status&&(g(!1),e.hasOwnProperty("message")&&vn("vibebp").addNotification({text:e.message}),e.hasOwnProperty("avatar"))){l(e.avatar);var t=wn("vibebp").getUser();t.avatar=e.avatar,localforage.setItem("bp_user",JSON.stringify(t));var n=t.username;t.hasOwnProperty("displayname")&&t.displayname.length&&(n=t.displayname),localforage.setItem("user_"+t.id,JSON.stringify({avatar:e.avatar,name:n})),wn("vibebp").setUser(t)}})}},window.vibebp.translations.update_image):""))};function gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var yn=wp.element,En=(yn.createElement,yn.useState),_n=yn.useEffect,On=(yn.Fragment,yn.render,wp.data),Nn=On.dispatch,kn=On.select,jn=function(e){var t=hn(En(!1),2),n=t[0],r=(t[1],hn(En("public"),2)),a=r[0],i=r[1],l=hn(En([]),2),o=l[0],c=l[1];return _n(function(){var e=kn("vibebp").getAction(),t=kn("vibebp").getMenu().filter(function(e){return"profile"===e.parent});t.map(function(n,r){e?t.findIndex(function(t){return t.css_id==e})>-1&&(i(t[t.findIndex(function(t){return t.css_id==e})].css_id),t[t.findIndex(function(t){return t.css_id==e})].class.push("current-menu-item")):-1==t[0].class.indexOf("current-menu-item")&&t[0].class.push("current-menu-item")}),c(t),0==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.profile.label),o.map(function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(e){var n=gn(o),r=n.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});n[r].class.splice(n[r].class.indexOf("current-menu-item"),1),n[t].class.push("current-menu-item"),c(n),i(n[t].css_id),Nn("vibebp").setAction(n[t].css_id)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"edit"===a?wp.element.createElement(sn,null):"change-avatar"===a?wp.element.createElement(bn,null):wp.element.createElement(Ze,null)))};function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Cn=wp.element,xn=(Cn.createElement,Cn.useState),Pn=Cn.useEffect,Dn=(Cn.Fragment,Cn.render,function(e){var t=Sn(xn(""),2),n=t[0],r=t[1];return Pn(function(){e.notification.content.hasOwnProperty("text")?r(e.notification.content.text):r(e.notification.content)},[e.notification.content]),wp.element.createElement("div",{className:"notification",dangerouslySetInnerHTML:{__html:n}})});function An(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Tn=wp.element,Mn=(Tn.createElement,Tn.useState),In=Tn.useEffect,Ln=(Tn.Fragment,Tn.render,wp.data),Fn=(Ln.dispatch,Ln.select),Jn=function(e){var t=An(Mn(""),2),n=t[0],r=t[1];return In(function(){var t="",n="";switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"forum":n="forum",t=e.id.item_id;break;case"group":n="group",t=e.id.item_id;break;case"activity":n="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":n="user",t=e.id.user_id;break;default:n=e.type,t=e.id.item_id}localforage.getItem(n+"_"+t).then(function(t){null!==t?r(JSON.parse(t)):fetch("".concat(window.vibebp.api.url,"/avatar"),{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:Fn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&(localforage.setItem(e.key,JSON.stringify(e.value)),r(e.value))})})},[]),"member"==e.type?wp.element.createElement("span",{className:"vibebp_member"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"user_tip"==e.type?wp.element.createElement("span",{className:"vibebp_member tip",title:n.name},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})):"name"==e.type?wp.element.createElement("span",null,n.name):"forum"==e.type?wp.element.createElement("span",null,n.name):wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})};function Hn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(n,!0).forEach(function(t){Rn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wn=wp.element,zn=(Wn.createElement,Wn.useState),$n=Wn.useEffect,Bn=(Wn.Fragment,Wn.render,wp.data),Kn=(Bn.dispatch,Bn.select),Vn=function(e){var t=Un(zn([]),2),n=t[0],r=t[1],a=Un(zn([]),2),i=a[0],l=a[1],o=Un(zn(!1),2),c=o[0],s=o[1],u=Un(zn({filter:"unread",sorter:"",page:1,search:""}),2),m=u[0],p=u[1],d=Un(zn(!1),2),f=d[0],v=d[1],w=Un(zn([]),2),b=w[0],g=w[1],h=Un(zn(!0),2),y=h[0],E=h[1],_=Un(zn(""),2),O=_[0],N=_[1],k=Un(zn(!1),2),j=k[0],S=k[1],C=Un(zn(!1),2),x=C[0],P=C[1];$n(function(){console.log(Kn("vibebp").getMenu());var e=Kn("vibebp").getMenu().filter(function(e){return"notifications"===e.parent});e.map(function(t,n){-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&e[n].class.push("current-menu-item")}),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),rt(function(){var e=qn({},m);e.token=Kn("vibebp").getToken(),E(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications),{method:"post",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(E(!1),e.status)if(x){var t=Hn(n);e.data.notifications.map(function(e){t.push(e)}),r(t),P(!1),t.length<e.data.total?S(!0):S(!1)}else r(e.data.notifications),e.data.notifications.length<e.data.total?S(!0):S(!1);else r([])})},500,[m]);var D=function(e,t){s(!1);var a=Hn(n);"read"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread"),{method:"post",body:JSON.stringify({is_new:0,id:e,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"unread"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread"),{method:"post",body:JSON.stringify({is_new:1,id:e,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"delete"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification"),{method:"post",body:JSON.stringify({id:e,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),a.splice(a.findIndex(function(t){return t.id===e}),1),r(a)};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.notifications.label),i.map(function(e,t){var n=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:n,onClick:function(n){var r=qn({},m);r.filter=e.css_id,"notifications-my-notifications"===e.css_id&&(r.filter="unread"),r.page=1,p(r);var a=Hn(i),o=a.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});a[o].class.splice(a[o].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),v(!1),g([]),N(""),l(a)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"vibebp_main_head"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:m.search,onChange:function(e){return p(qn({},m,{search:e.target.value}))},placeholder:window.vibebp.translations.search_text})),wp.element.createElement("select",{onChange:function(e){var t=qn({},m);t.sorter=e.target.value,p(t)}},Object.keys(window.vibebp.components.notifications.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.sorters[e])}))),n.length||y?wp.element.createElement("div",{className:"table_block"},wp.element.createElement("table",{className:"table"},wp.element.createElement("thead",null,wp.element.createElement("th",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:f?"checked":"",onClick:function(){f?v(!1):(v(!0),g([]))}}),wp.element.createElement("label",{for:"selectall"}))),wp.element.createElement("th",null,window.vibebp.translations.owner),wp.element.createElement("th",null,window.vibebp.components.notifications.label),wp.element.createElement("th",null,window.vibebp.translations.date),wp.element.createElement("th",null,wp.element.createElement("a",{className:"vicon vicon-more rotate90"}))),wp.element.createElement("tbody",null,y?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):n.length?n.map(function(e){return wp.element.createElement("tr",null,wp.element.createElement("td",{valign:"center"},wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=Hn(b);f&&(v(!1),n.map(function(e){t.push(e.id)})),-1===b.indexOf(e.id)?(t.push(e.id),g(t)):(t.splice(b.indexOf(e.id),1),g(t))},checked:f||-1!==b.indexOf(e.id)?"checked":"",id:e.id}),wp.element.createElement("label",{for:e.id}))),wp.element.createElement("td",{valign:"center"},wp.element.createElement(Jn,{type:e.component_name,id:{item_id:e.item_id,secondary_item_id:e.secondary_item_id,user_id:e.user_id}})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(Dn,{notification:e,update:D})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(ye,{time:e.date_notified})),wp.element.createElement("td",{valign:"center"},wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){s(!c&&e.id)}}),c===e.id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(window.vibebp.components.notifications.actions).map(function(t){if(t!==m.filter)return wp.element.createElement("li",{value:t,onClick:function(){D(e.id,t)}},window.vibebp.components.notifications.actions[t])})):""))}):"")),f||b.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){N(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(window.vibebp.components.notifications.actions).map(function(e){if(e!==m.filter)return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.actions[e])})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=Hn(n);if(console.log(O),O)if(f){if(r([]),"read"===O&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread"),{method:"post",body:JSON.stringify({is_new:0,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"unread"===O&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread"),{method:"post",body:JSON.stringify({is_new:1,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"delete"===O){var t=[];n.map(function(e){t.push(e.id)}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/deleteall"),{method:"post",body:JSON.stringify({ids:t,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){})}}else b.length&&(b.map(function(t){e.splice(e.findIndex(function(e){return t===e.id}),1)}),r(e),"read"===O&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread"),{method:"post",body:JSON.stringify({is_new:0,id:b,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"unread"===O&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread"),{method:"post",body:JSON.stringify({is_new:1,id:b,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),"delete"===action&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification"),{method:"post",body:JSON.stringify({id:b,token:Kn("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}))}},window.vibebp.translations.apply)):"",j?wp.element.createElement("a",{className:"link",onClick:function(){var e=qn({},m);e.page+=1,p(e),P(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_notifications_found)))};function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Qn=wp.element,Zn=(Qn.createElement,Qn.useState),Xn=(Qn.useEffect,Qn.Fragment),er=(Qn.render,wp.data),tr=(er.dispatch,er.select,function(e){var t=Gn(Zn(JSON.parse(e.object)),2),n=t[0];t[1];return wp.element.createElement(Xn,null,"unstyled"===n.blocks[0].type?wp.element.createElement("div",{className:"blocktext"},n.blocks[0].text):"")});function nr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ar=wp.element,ir=(ar.createElement,ar.useState),lr=ar.useEffect,or=ar.Fragment,cr=(ar.render,ar.useContext),sr=wp.data,ur=sr.dispatch,mr=sr.select,pr=function(e){var t=cr(r),n=rr(ir(0),2),a=n[0],i=n[1],l=rr(ir(!1),2),o=l[0],c=l[1],s=rr(ir(e.message.labels),2),u=s[0],m=s[1];lr(function(){Object.keys(e.message.recipients).map(function(t){e.message.recipients[t].user_id===mr("vibebp").getUser()&&e.message.recipients[t].unread_count&&i(1)})},[]);var p="message_add_label vicon vicon-plus";return o&&(p="message_add_label vicon vicon-close"),wp.element.createElement(or,null,t.messageLabels&&t.messageLabels.length?wp.element.createElement("div",{className:"message_labels"},u.length?u.map(function(n){var r=t.messageLabels[t.messageLabels.findIndex(function(e){return e.slug===n})];return wp.element.createElement("span",{style:{background:r.color},onClick:function(){return function(t){var n=nr(u);n.splice(n.indexOf(t),1),m(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:e.message.thread_id,action:"remove_label",label:t,token:mr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(n){e.updateLabels(t,0),n.hasOwnProperty("message")&&ur("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})})}(n)}},r.name)}):"",wp.element.createElement("a",{className:p,onClick:function(){c(!o)}}),o?wp.element.createElement("ul",{className:"allmessage_labels"},t.messageLabels.map(function(t){if(-1===u.indexOf(t.slug))return wp.element.createElement("li",{onClick:function(){return function(t){c(!1);var n=nr(u);n.push(t.slug),m(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:e.message.thread_id,action:"add_label",label:t.slug,token:mr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(n){e.updateLabels(t.slug,1),n.hasOwnProperty("message")&&ur("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})})}(t)},style:{background:t.color}},t.name)})):""):"",wp.element.createElement("div",{className:"message",onClick:function(){e.show()}},a?wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}),at(e.message.last_message_content)?wp.element.createElement(tr,{object:e.message.last_message_content,type:"text"}):wp.element.createElement("div",{className:"message_content",dangerouslySetInnerHTML:{__html:e.message.last_message_content}})))};function dr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(n,!0).forEach(function(t){wr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gr=wp.element,hr=(gr.createElement,gr.useState),yr=gr.useEffect,Er=gr.Fragment,_r=(gr.render,wp.data),Or=_r.dispatch,Nr=_r.select,kr=function(e){var t=br(hr(""),2),n=t[0],r=t[1],a=br(hr(!1),2),i=a[0],l=a[1],o=br(hr(!1),2),c=o[0],s=o[1],u=br(hr([]),2),m=u[0],p=u[1],d=br(hr({content:"",recipients:[],subject:"",thread_id:0,meta:[]}),2),f=d[0],v=d[1],w=br(hr([]),2),b=w[0],g=w[1],h=br(hr(""),2),y=h[0],E=h[1];yr(function(){if(e.hasOwnProperty("thread_id")){var t=vr({},f);t.thread_id=e.thread_id,t.recipients=e.recipients,v(t)}},[]),rt(function(){n.length>4&&(s(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:n,type:"user",token:Nr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){s(!1),e.status&&Array.isArray(e.results)&&(e.results.map(function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))}),p(e.results))}))},500,[n]);return wp.element.createElement("div",{className:"newmessage_form"},e.recipients||2==e.type?"":wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.recipients),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},f.recipients.map(function(e){return wp.element.createElement(Jn,{type:"member",click:function(){var t=vr({},f);t.recipients.splice(t.recipients.indexOf(e),1),v(t)},id:{user_id:e}})})),wp.element.createElement("div",{className:c?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:n,placeholder:window.vibebp.translations.search_member,onChange:function(e){r(e.target.value)}}))),m.length?wp.element.createElement("div",{className:"search_results"},m.map(function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){r("");var n=dr(m),a=vr({},f);-1===a.recipients.indexOf(e.id)&&(a.recipients.push(e.id),v(a),n.splice(t,1),p(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))})):""),e.hasOwnProperty("thread_id")?"":wp.element.createElement("div",{className:"subject"},wp.element.createElement("label",null,window.vibebp.translations.subject),wp.element.createElement("input",{type:"text",value:f.subject,onChange:function(e){var t=vr({},f);t.subject=e.target.value,v(t)}})),wp.element.createElement("div",{className:"message_body",id:"message_body"},wp.element.createElement("label",null,window.vibebp.translations.message),wp.element.createElement("div",{className:"message_editor"},wp.element.createElement("textarea",{onChange:function(e){var t=vr({},f);t.content=e.target.value,v(t)}},f.content))),wp.element.createElement("div",{className:"message_actions"},wp.element.createElement("div",{className:"message_Attachments"},wp.element.createElement(Er,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){var e=dr(b);e.push("attachment"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){var e=dr(b);e.push("video"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){var e=dr(b);e.push("image"),g(e)}})),b.length?b.map(function(e,t){return wp.element.createElement("div",{className:"message_attachment"},"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(ne,{type:e,update:function(n,r){var a=dr(y);a[t]=new File([n[0]],n[0].name),E(a),v(vr({},f,{meta:[].concat(dr(f.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=dr(b);e.splice(t,1);var n=dr(y);n.splice(t,1),E(n),g(e)}}))}):""),wp.element.createElement("div",{className:"message_buttons"},f.thread_id?"":wp.element.createElement("a",{className:"link",onClick:e.cancel},window.vibebp.translations.cancel),wp.element.createElement("a",{className:i?"button is-primary is-loading":"button is-primary",onClick:function(){var t=1;if(f.content.length||(t=0,Or("vibebp").addNotification({text:window.vibebp.translations.missing_content})),f.recipients.length||2==e.type||(t=0,Or("vibebp").addNotification({text:window.vibebp.translations.missing_recipients})),f.subject.length||f.thread_id||(t=0,Or("vibebp").addNotification({text:window.vibebp.translations.missing_subject})),t){var n=vr({},f);2==e.type&&(n.notice=1),l(!0);var r=new FormData;r.append("body",JSON.stringify({args:n,token:Nr("vibebp").getToken()})),y.length&&y.map(function(e,t){r.append("files_"+t,e)}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/send"),{method:"post",body:r}).then(function(e){return e.json()}).then(function(t){l(!1),e.update(t,f),g([]),E(""),v(vr({},f,{content:"",subject:""}))})}}},window.vibebp.translations.send_message))))};function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Pr=wp.element,Dr=(Pr.createElement,Pr.useState),Ar=Pr.useEffect,Tr=Pr.Fragment,Mr=(Pr.render,wp.data),Ir=(Mr.dispatch,Mr.select),Lr=function(e){var t=xr(Dr(e.message),2),n=t[0],r=t[1],a=xr(Dr(0),2),i=a[0],l=a[1],o=xr(Dr([]),2),c=o[0],s=o[1];Ar(function(){var t=[],n=Ir("vibebp").getUser();Object.keys(e.message.recipients).map(function(r){e.message.recipients[r].user_id===n.id?e.message.recipients[r].unread_count&&l(1):t.push(e.message.recipients[r].user_id)}),s(t),r(e.message)},[e.message]);var u=Ir("vibebp").getUser();return wp.element.createElement("div",{className:"fullmessage"},wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_left"},c.length?c.map(function(e){return wp.element.createElement(Jn,{type:"user",id:{user_id:e}})}):""),wp.element.createElement("div",{className:"header_right"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}}),wp.element.createElement("a",{href:"#message_body",className:"vicon vicon-back-left"}),wp.element.createElement("i",{className:"vicon vicon-trash",onClick:function(){return e.action("delete")}}))),wp.element.createElement("div",{className:"portal_body"},n.messages.map(function(e,t){return wp.element.createElement("div",{className:e.sender_id!=u.id?"notmine":"mine"},wp.element.createElement("div",{className:"portal_message_wrapper"},wp.element.createElement(Jn,{type:"user",id:{user_id:e.sender_id}}),wp.element.createElement("div",{className:"portal_message"},wp.element.createElement("div",{className:"portal_title"},0==t?wp.element.createElement(Tr,null,wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,e.subject):wp.element.createElement("span",null,e.subject)),wp.element.createElement(ye,{time:e.date_sent})):wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,wp.element.createElement(ye,{time:e.date_sent})):wp.element.createElement("span",null,wp.element.createElement(ye,{time:e.date_sent})))),wp.element.createElement("div",{className:"portal_content"},at(e.message)?wp.element.createElement(tr,{object:e.message}):wp.element.createElement("div",{className:"portal_content",dangerouslySetInnerHTML:{__html:e.message}})),wp.element.createElement("div",{className:"message_attachments"},"object"===jr(e.meta)&&null!==e.meta?Object.keys(e.meta).map(function(t){return wp.element.createElement(Tr,null,e.meta[t].map(function(e){if(e.length>3){if("image"==t)return wp.element.createElement("img",{src:e,className:"activity_meta image"});if("video"==t)return wp.element.createElement("video",{src:e,className:"activity_meta video"});if("attachment"==t)return wp.element.createElement("a",{href:e,target:"_blank",className:"vicon vicon-clip activity_meta"})}}))}):""))),wp.element.createElement("div",null))}))),c.length?wp.element.createElement(kr,{thread_id:n.thread_id,update:function(e,t){if(e.status){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(n,!0).forEach(function(t){Cr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);a.messages=e.data,r(a)}},recipients:c}):"")};function Fr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(n,!0).forEach(function(t){Yr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Rr=wp.element,Ur=(Rr.createElement,Rr.useState),Wr=Rr.useEffect,zr=Rr.Fragment,$r=(Rr.rende,Rr.useContext),Br=wp.data,Kr=Br.dispatch,Vr=Br.select,Gr=function(e){var t=$r(r),n=qr(Ur([]),2),a=n[0],i=n[1],l=qr(Ur([]),2),o=l[0],c=l[1],s=qr(Ur(!1),2),u=s[0],m=s[1],p=qr(Ur({filter:"unread",sorter:"",page:1,search:"",label:""}),2),d=p[0],f=p[1],v=qr(Ur(!1),2),w=v[0],b=v[1],g=qr(Ur([]),2),h=g[0],y=g[1],E=qr(Ur(!0),2),_=E[0],O=E[1],N=qr(Ur(""),2),k=N[0],j=N[1],S=qr(Ur(!1),2),C=S[0],x=S[1],P=qr(Ur(!1),2),D=P[0],A=P[1],T=qr(Ur(!1),2),M=T[0],I=T[1],L=qr(Ur(0),2),F=L[0],J=L[1],H=qr(Ur(!1),2),Y=H[0],q=H[1],R=qr(Ur({text:"",color:"#000"}),2),U=R[0],W=R[1],z=qr(Ur([]),2),$=z[0],B=z[1],K=qr(Ur(window.vibebp.components.messages.actions),2),V=K[0],G=(K[1],qr(Ur(!1),2)),Q=G[0],Z=G[1];Wr(function(){var e=Vr("vibebp").getMenu().filter(function(e){return"messages"===e.parent});e.map(function(t,n){"notices"==t.slug&&e.splice(n,1),-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&e[n].class.push("current-menu-item")}),c(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),rt(function(){var e=Hr({},d);e.token=Vr("vibebp").getToken(),O(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages),{method:"post",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(O(!1),e.status)if(D){var t=Fr(a);e.data.threads.map(function(e){t.push(e)}),i(t),A(!1),t.length<e.data.total?x(!0):x(!1)}else i(e.data.threads),e.data.threads.length<e.data.total?x(!0):x(!1);else i([])})},500,[d]),Wr(function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/labels"),{method:"post",body:JSON.stringify({token:Vr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&Array.isArray(e.labels)&&e.labels.length&&(B(e.labels),t.update("messageLabels",e.labels))})},[d]);var X=function(e,t){m(!1);var n=Fr(a);if(!Array.isArray(e)){var r=[];r.push(e),e=r}if("star"===t||"unstar"===t){var l=[];e.map(function(e,t){Z(e),n[n.findIndex(function(t){return t.thread_id===e})].messages.map(function(e,t){l.push(e.id)})}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:l,action:t,token:Vr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(r){Z(!1),r.status&&("unstar"===t&&e.map(function(e,t){n[n.findIndex(function(t){return t.thread_id===e})].star=0}),"star"===t&&e.map(function(e,t){n[n.findIndex(function(t){return t.thread_id===e})].star=1}))})}"read"===t&&(e.map(function(e,t){n[n.findIndex(function(t){return t.thread_id===e})].unread_count=0}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:e,action:t,token:Vr("vibebp").getToken()})})),"unread"===t&&(e.map(function(e,t){n[n.findIndex(function(t){return t.thread_id===e})].unread_count++}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:e,action:t,token:Vr("vibebp").getToken()})})),"delete"===t&&(e.map(function(e,t){n.splice(n.findIndex(function(t){return t.thread_id===e}),1)}),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:e,action:t,token:Vr("vibebp").getToken()})})),i(n)},ee=function(e){var t=Hr({},d);t.label===e.slug?t.label="":t.label=e.slug,f(t)},te=function(e){return!1!==F&&F===e?"message_block active":"message_block"};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.messages.label),wp.element.createElement("a",{className:"button is-primary new_mail",onClick:function(){I(1)}},window.vibebp.translations.new_message),o.map(function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=Hr({},d);r.filter=e.css_id,r.page=1,J(!1),I(!1),d.css_id!==r.filter&&f(r);var a=Fr(o),i=a.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),b(!1),y([]),j(""),c(a)}},e.name)}),wp.element.createElement("div",{className:"labels"},wp.element.createElement("div",{class:"labels_title"},wp.element.createElement("span",null,window.vibebp.translations.labels),wp.element.createElement("a",{className:"link",onClick:function(){q(!Y)}},window.vibebp.translations.add_new)),Y?wp.element.createElement("div",{className:"newlabel_form"},wp.element.createElement("input",{type:"text",value:U.text,onChange:function(e){var t=Hr({},U);t.text=e.target.value,W(t)}}),wp.element.createElement("label",{style:{background:U.color}},wp.element.createElement("input",{type:"color",onChange:function(e){var t=Hr({},U);t.color=e.target.value,W(t)}})),wp.element.createElement("a",{className:"button is-primary vicon vicon-plus",onClick:function(){q(!1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/add"),{method:"post",body:JSON.stringify(Hr({},U,{token:Vr("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){if(e.status){if(e.labels.length){var n=Fr($);e.labels.map(function(e){-1==n.findIndex(function(t){return t.slug==e.slug})&&n.push(e)}),B(e.labels)}t.update("messageLabels",e.labels)}e.hasOwnProperty("message")&&Kr("vibebp").addNotification({text:e.message})})}})):"",$&&$.length?wp.element.createElement("ul",{className:"message_labels"},$.map(function(e,n){var r="";return d.label==e.slug&&(r="active"),wp.element.createElement("li",{className:r},wp.element.createElement("label",null,wp.element.createElement("strong",{onClick:function(){return ee(e)}},wp.element.createElement("span",{style:{borderColor:e.color}}),e.name),wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){return function(e){var n=Fr($);n.splice(e,1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/remove"),{method:"post",body:JSON.stringify({slug:$[e].slug,token:Vr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),B(n),t.update("messageLabels",n)}(n)}})),wp.element.createElement("span",{onClick:function(){return ee(e)}},e.count))})):""))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"message_left_right"},wp.element.createElement("div",{className:"message_list_left"},wp.element.createElement("div",{className:"message_list_head"},w||h.length?"":wp.element.createElement(zr,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:d.search,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=Hr({},d);t.search=e.target.value,f(t)}})),wp.element.createElement("select",{onChange:function(e){var t=Hr({},d);t.sorter=e.target.value,f(t)}},Object.keys(window.vibebp.components.messages.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.messages.sorters[e])}))),wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:w?"checked":"",onClick:function(){w?b(!1):(b(!0),y([]))}}),wp.element.createElement("label",{for:"selectall"})),w||h.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){j(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(V).map(function(e){if(e!==d.filter)return wp.element.createElement("option",{value:e},V[e])})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=Fr(a),t=[];k&&(w?e.map(function(e,n){t.push(e.thread_id)}):h.length&&e.map(function(e,n){h.indexOf(e.thread_id)>-1&&t.push(e.thread_id)}),X(t,k))}},window.vibebp.translations.apply)):""),wp.element.createElement("div",{className:"messages"},a.length||_?wp.element.createElement(zr,null,_?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):a.length?a.map(function(e,n){var r="vicon vicon-star";return r=Q==e.thread_id?"vicon vicon-more":"vicon vicon-star",e.star&&(r+=" filled"),wp.element.createElement("div",{className:te(n)},wp.element.createElement("div",{className:"message_avatars"},Object.keys(e.sender_ids).length?Object.keys(e.sender_ids).map(function(t,n){return Object.keys(e.sender_ids)>3?n<3?wp.element.createElement(Jn,{type:"user",id:{user_id:t}}):void 0:wp.element.createElement(Jn,{type:"user",id:{user_id:t}})}):"",Object.keys(e.sender_ids).length>3?wp.element.createElement("span",null,"+"+(Object.keys(e.sender_ids).length-3)+" "+window.vibebp.translations.more):""),wp.element.createElement("div",{className:"message_block_main"},wp.element.createElement("div",{className:"message_block_head"},wp.element.createElement(ye,{time:e.last_message_date}),wp.element.createElement("div",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=Fr(h);w&&(b(!1),a.map(function(e){t.push(e.thread_id)})),-1===h.indexOf(e.thread_id)?(t.push(e.thread_id),y(t)):(t.splice(h.indexOf(e.thread_id),1),y(t))},checked:w||-1!==h.indexOf(e.thread_id)?"checked":"",id:e.thread_id}),wp.element.createElement("label",{for:e.thread_id})),wp.element.createElement("a",{onClick:function(){e.star?X(e.thread_id,"unstar"):X(e.thread_id,"star")},className:r}),wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){m(!u&&e.thread_id)}}),wp.element.createElement(zr,null,u===e.thread_id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(V).map(function(t){if("unread"!==t&&"read"!==t&&"star"!==t&&"unstar"!==t&&"remove_label"!==t||"unread"===t&&!e.unread_count||"read"===t&&e.unread_count||"unstar"===t&&e.star||"star"===t&&!e.star)return wp.element.createElement("li",{value:t,onClick:function(){X(e.thread_id,t)}},V[t])})):""))),wp.element.createElement(pr,{message:e,labels:$,updateLabels:function(e,n){!function(e,n){var r=Fr($);n?r[r.findIndex(function(t){return t.slug===e})].count++:r[r.findIndex(function(t){return t.slug===e})].count--,B(r),t.update("messageLabels",r)}(e,n)},show:function(){J(n)}})))}):"",C?wp.element.createElement("a",{className:"link",onClick:function(){var e=Hr({},d);e.page+=1,f(e),A(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_messages_found))),wp.element.createElement("div",{className:"message_main"},M?wp.element.createElement(kr,{type:M,cancel:function(){I(!1)},update:function(e,t){var n=Fr(a);if(e.status){var r={};t.recipients.map(function(t){r[1]={user_id:t,unread_count:1},r[2]={user_id:e.data[0].sender_id,unread_count:0}});var l={thread_id:e.data[0].thread_id,last_message_date:e.data[0].date_sent,last_message_subject:e.data[0].subject,last_message_content:e.data[0].message,star:0,recipients:r,sender_ids:{0:e.data[0].sender_id},messages:e.data,unread_count:0};n.unshift(l),i(n),J(0),I(!1)}}}):!_&&a.length&&!1!==F?wp.element.createElement(Lr,{message:a[F],show:function(){J(!1)},action:function(e){return function(e,t){"delete"==t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions"),{method:"post",body:JSON.stringify({id:a[e].thread_id,action:"delete",token:Vr("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(t){var n=Fr(a);n.splice(e,1),i(n),J(!1),t.hasOwnProperty("message")&&Kr("vibebp").addNotification({text:t.message,icon:"vicon vicon-save"})})}(F,e)}}):""))))};function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(n,!0).forEach(function(t){Xr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ta=wp.element,na=(ta.createElement,ta.useState),ra=ta.useEffect,aa=ta.Fragment,ia=(ta.render,wp.data),la=ia.dispatch,oa=ia.select,ca=function(e){var t=ea(na({unfriend:!1,accept:!1,reject:!1,cancel:!1,follow:!1,unfollow:!1}),2),n=t[0],r=t[1],a=ea(na(!1),2),i=(a[0],a[1]),l=ea(na(e.member),2),o=l[0],c=l[1],s=ea(na(!1),2);s[0],s[1];ra(function(){c(e.member)},[e.member]);var u=function(t){e.action&&e.action(t);var a=Zr({},n);a[t]=!0,r(a),fetch("".concat(window.vibebp.api.url,"/followers/action"),{method:"post",body:JSON.stringify({action:t,user:o,token:oa("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){var a=Zr({},n);a[t]=!1,r(a),e.status&&("follow"===t&&(c(Zr({},o,{is_following:!0})),la("vibebp").addNotification({message:e.message}),la("vibebp").sendRealTimeNotification(e.rtm.user_id,e.rtm.message)),"unfollow"===t&&(c(Zr({},o,{is_following:!1})),la("vibebp").addNotification({message:e.message}),la("vibebp").sendRealTimeNotification(e.rtm.user_id,e.rtm.message)))})};return wp.element.createElement("div",{className:"membercard",onClick:function(){i(!0)}},wp.element.createElement("img",{src:o.avatar}),wp.element.createElement("div",{className:"member_details"},wp.element.createElement("strong",null,o.display_name?o.display_name:o.name?o.name:""),wp.element.createElement(aa,null,o.hasOwnProperty("is_admin")?o.is_admin?wp.element.createElement("span",{className:"is-highlight is-admin"},window.vibebp.translations.admin):o.is_mod?wp.element.createElement("span",{className:"is-highlight is-mod"},window.vibebp.translations.mod):"":""),wp.element.createElement(aa,null,o.hasOwnProperty("latest_update")&&o.latest_update?wp.element.createElement("span",null,o.latest_update.content):""),wp.element.createElement("div",{className:"request_actions"},o.hasOwnProperty("is_friend")?wp.element.createElement("a",{className:n.unfriend?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:e.unfriend}):o.hasOwnProperty("is_friend_request")?wp.element.createElement(aa,null,wp.element.createElement("a",{className:n.accept?"button is-success is-small vicon vicon-face-smile is-loading":"button is-success is-small vicon vicon-face-smile",onClick:function(){return e.action("accept")}}),wp.element.createElement("a",{className:n.reject?"button is-warning is-small vicon vicon-face-sad is-loading":"button is-warning is-small vicon vicon-face-sad",onClick:function(){return e.action("reject")}})):o.hasOwnProperty("is_my_friend_request")?wp.element.createElement(aa,null,wp.element.createElement("a",{className:n.cancel?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:function(){return e.action("cancel")}})):"",window.vibebp.settings.followers?o.hasOwnProperty("is_following")&&o.is_following?wp.element.createElement("a",{className:n.unfollow?"button is-info is-small vicon vicon-thumb-down is-loading":"button is-info is-small vicon vicon-thumb-down",onClick:function(){return u("unfollow")}}):wp.element.createElement("a",{className:n.follow?"button is-info is-small vicon vicon-thumb-up is-loading":"button is-info is-small vicon vicon-thumb-up",onClick:function(){return u("follow")}}):"")))};function sa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(n,!0).forEach(function(t){pa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var fa=wp.element,va=(fa.createElement,fa.useState),wa=fa.useEffect,ba=(fa.Fragment,fa.render,wp.data),ga=(ba.dispatch,ba.select),ha=function(e){var t=da(va(!1),2),n=t[0],r=t[1],a=da(va({page:1,search:"",sort:"active"}),2),i=a[0],l=a[1],o=da(va([]),2),c=o[0],s=o[1],u=da(va(!1),2),m=u[0],p=u[1],d=da(va(!1),2),f=d[0],v=d[1];wa(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/"),{method:"post",body:JSON.stringify(ma({},i,{token:ga("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){if(r(!1),e.status)if(m){p(!1);var t=sa(c);e.data.users.map(function(e){t.push(e)}),s(t),t.length<e.data.total?v(!0):v(!1)}else s(e.data.users),e.data.users.length<e.data.total?v(!0):v(!1)})},[i]);var w=function(e){var t=sa(c);t.splice(c.findIndex(function(t){return t.id===e.id}),1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/removefriendship"),{method:"post",body:JSON.stringify({friend_userid:e.id,token:ga("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){}),s(t)};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=ma({},i);t.search=e.target.value,t.page=1,l(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){l(ma({},i,{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.sorters[e])})))),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map(function(e){return wp.element.createElement(ca,{member:ma({},e,{is_friend:1}),unfriend:w})}),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=ma({},i);e.page=i.page+1,p(!0),l(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_friends_found)))};function ya(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(n,!0).forEach(function(t){Oa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ka=wp.element,ja=(ka.createElement,ka.useState),Sa=ka.useEffect,Ca=(ka.Fragment,ka.render,wp.data),xa=(Ca.dispatch,Ca.select),Pa=function(e){var t=Na(ja(!1),2),n=t[0],r=t[1],a=Na(ja({page:1,requester:0,sort:"DESC",reload:0}),2),i=a[0],l=a[1],o=Na(ja([]),2),c=o[0],s=o[1],u=Na(ja(!1),2),m=u[0],p=u[1],d=Na(ja(!1),2),f=d[0],v=d[1],w=Na(ja(!1),2),b=w[0],g=w[1],h=Na(ja(!1),2),y=h[0],E=h[1],_=Na(ja([]),2),O=_[0],N=_[1],k=Na(ja(""),2),j=k[0],S=k[1],C=Na(ja([]),2),x=C[0],P=C[1];Sa(function(){j.length>4&&(E(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:j,type:"user",token:xa("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){E(!1),e.status&&Array.isArray(e.results)&&(e.results.map(function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))}),P(e.results))}))},[j]),Sa(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/requests"),{method:"post",body:JSON.stringify(_a({},i,{token:xa("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){if(r(!1),v(!1),e.status)if(m){if(p(!1),e.data.length){var t=ya(c);e.data.map(function(e){t.push(e)}),s(t),20===e.data.length&&v(!0)}}else s(e.data),20===e.data.length&&v(!0)})},[i]);var D=function(e,t){var n=c.findIndex(function(t){return t.friendship_id===e});fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/action"),{method:"post",body:JSON.stringify({friendship_id:e,action:t,friend_id:c[n].user.ID,token:xa("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){});var r=ya(c);r.splice(n,1),s(r)};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("a",{onClick:function(){l(_a({},i,{requester:0}))},className:i.requester?"":"active"},window.vibebp.translations.requestee),wp.element.createElement("a",{onClick:function(){l(_a({},i,{requester:1}))},className:i.requester?"active":""},window.vibebp.translations.requester),wp.element.createElement("a",{onClick:function(){g(!0)},className:"button is-primary"},window.vibebp.translations.add_friend)),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){l(_a({},i,{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.requests_sorter).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.requests_sorter[e])})))),b?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},O.map(function(e){return wp.element.createElement(Jn,{type:"user",click:function(){var t=ya(O);t.splice(t.indexOf(e),1),N(t)},id:{user_id:e}})}),O.length?wp.element.createElement("a",{className:"button is-primary",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/addfriendship"),{method:"post",body:JSON.stringify({friends:O,token:xa("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){l(_a({},i,{reload:1})),N([])}),g(!1)}},window.vibebp.translations.send_friend_request):""),wp.element.createElement("div",{className:y?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:j,placeholder:window.vibebp.translations.search_member,onChange:function(e){S(e.target.value)}}))),x.length?wp.element.createElement("div",{className:"search_results"},x.map(function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){S("");var n=ya(x),r=ya(O);-1===r.indexOf(e.id)&&(r.push(e.id),N(r),n.splice(t,1),P(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))})):""):"",wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map(function(e){return i.requester?wp.element.createElement(ca,{member:_a({},e.user,{is_my_friend_request:1}),action:function(t){return D(e.friendship_id,t)}}):wp.element.createElement(ca,{member:_a({},e.user,{is_friend_request:1}),action:function(t){return D(e.friendship_id,t)}})}),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=_a({},i);e.page=i.page+1,p(!0),l(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_requests_found)))};function Da(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ia=wp.element,La=(Ia.createElement,Ia.useState),Fa=Ia.useEffect,Ja=(Ia.Fragment,Ia.render,wp.data),Ha=(Ja.dispatch,Ja.select),Ya=function(e){var t=Ma(La({}),2),n=t[0],r=t[1],a=Ma(La([]),2),i=a[0],l=a[1],o=Ma(La(""),2),c=o[0],s=o[1];return Fa(function(){var e=Ha("vibebp").getMenu().filter(function(e){return"friends"===e.parent});e.map(function(t,n){-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&e[n].class.push("current-menu-item")}),l(e),0==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.friends.label),i.map(function(e,t){var a=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:a,onClick:function(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(n,!0).forEach(function(t){Ta(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);o.filter=e.css_id,o.page=1,n.css_id!==o.filter&&r(o),s(e.css_id);var c=Da(i),u=c.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),l(c)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},"requests"===c?wp.element.createElement(Pa,null):wp.element.createElement(ha,null)))};function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(n,!0).forEach(function(t){Ua(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var za=wp.element,$a=(za.createElement,za.useState),Ba=(za.useEffect,za.Fragment,za.render,wp.data),Ka=(Ba.dispatch,Ba.select),Va=function(e){var t=Wa($a(!1),2),n=t[0],r=t[1],a=Wa($a({page:1,search:"",orderby:"active"}),2),i=a[0],l=a[1],o=Wa($a([]),2),c=o[0],s=o[1];return rt(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/followers"),{method:"post",body:JSON.stringify(Ra({},i,{token:Ka("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&s(e.followers)})},500,[i]),wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_main_head vibebp_form"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return l(Ra({},i,{search:e.target.value}))}})),wp.element.createElement("select",{onChange:function(e){return l(Ra({},i,{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])}))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map(function(e){return wp.element.createElement(ca,{member:e})}):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_followers)))};function Ga(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qa(n,!0).forEach(function(t){Xa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ti=wp.element,ni=(ti.createElement,ti.useState),ri=(ti.useEffect,ti.Fragment,ti.render,wp.data),ai=ri.dispatch,ii=ri.select,li=function(e){var t=ei(ni(!1),2),n=t[0],r=t[1],a=ei(ni({page:1,search:"",orderby:"active"}),2),i=a[0],l=a[1],o=ei(ni([]),2),c=o[0],s=o[1],u=ei(ni(!1),2),m=u[0],p=u[1],d=ei(ni([]),2),f=d[0],v=d[1],w=ei(ni(""),2),b=w[0],g=w[1],h=ei(ni([]),2),y=h[0],E=h[1],_=ei(ni(!1),2),O=(_[0],_[1]),N=ei(ni(!1),2),k=(N[0],N[1]);rt(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/following"),{method:"post",body:JSON.stringify(Za({},i,{token:ii("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&s(e.following)})},500,[i]),rt(function(){b.length>4&&(O(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:b,type:"user",token:ii("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){O(!1),e.status&&Array.isArray(e.results)&&(e.results.map(function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))}),E(e.results))}))},500,[b]);return wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_followers_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return l(Za({},i,{search:e.target.value}))}})),m?wp.element.createElement("div",{className:"add_member_wrapper recipients"},f.length?wp.element.createElement("div",{className:"add_following_wrapper"},f.map(function(e,t){return wp.element.createElement(Jn,{type:"user",click:function(){var e=Ga(f);e.splice(t,1),v(e)},id:{user_id:e.id}})}),wp.element.createElement("a",{className:"vicon vicon-plus button is-link",onClick:function(){k(!0),fetch("".concat(window.vibebp.api.url,"/followers/action"),{method:"post",body:JSON.stringify({followers:f,action:"follow",token:ii("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){if(k(!1),e.status){p(!1);var t=Ga(f);t.map(function(e,n){t[n].is_following=1});var n=[].concat(Ga(c),Ga(t));s(n),e.hasOwnProperty("message")&&e.message.length&&e.message.map(function(e){ai("vibebp").addNotification({icon:"vicon vicon-thumb-up",message:e})}),e.hasOwnProperty("rtm")&&e.rtm.length&&e.rtm.map(function(e){ai("vibebp").sendRealTimeNotification(e.user_id,e.message)})}else e.hasOwnProperty("message")&&ai("vibebp").addNotification({text:e.message})})}})):"",wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:b,onChange:function(e){return g(e.target.value)}}),y.length?wp.element.createElement("div",{className:"search_results"},y.map(function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){g("");var n=Ga(y),r=Ga(f);-1===r.indexOf(e)&&(r.push(e),v(r),n.splice(t,1),E(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))})):""):wp.element.createElement("a",{className:"button is-primary",onClick:function(){return p(!0)}},window.vibebp.translations.follow_members)),wp.element.createElement("select",{onChange:function(e){return l(Za({},i,{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])}))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map(function(e){return wp.element.createElement(ca,{member:e})}):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_following)))};function oi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mi=wp.element,pi=(mi.createElement,mi.useState),di=mi.useEffect,fi=(mi.Fragment,mi.render,wp.data),vi=(fi.dispatch,fi.select),wi=function(e){var t=ui(pi({}),2),n=t[0],r=t[1],a=ui(pi([]),2),i=a[0],l=a[1],o=ui(pi(""),2),c=o[0],s=o[1];return di(function(){var e=vi("vibebp").getMenu().filter(function(e){return"followers"===e.parent});e.map(function(t,n){-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&e[n].class.push("current-menu-item")}),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.followers.label),i.map(function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(n,!0).forEach(function(t){si(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);o.filter=e.css_id,o.page=1,n.css_id!==o.filter&&r(o),s(e.css_id);var c=oi(i),u=c.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),l(c)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},"following"===c?wp.element.createElement(li,null):wp.element.createElement(Va,null)))};function bi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(n,!0).forEach(function(t){yi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _i=wp.element,Oi=(_i.createElement,_i.useState),Ni=_i.useEffect,ki=_i.Fragment,ji=(_i.render,wp.data),Si=ji.dispatch,Ci=ji.select,xi=function(e){var t=Ei(Oi(!0),2),n=t[0],r=t[1],a=Ei(Oi({component:"",id:"",search_terms:"",type:"",role:"",page:1}),2),i=a[0],l=a[1],o=Ei(Oi([]),2),c=o[0],s=o[1],u=Ei(Oi(!1),2),m=u[0],p=u[1],d=Ei(Oi([]),2),f=d[0],v=d[1],w=Ei(Oi(""),2),b=w[0],g=w[1],h=Ei(Oi([]),2),y=h[0],E=h[1],_=Ei(Oi([]),2),O=_[0],N=_[1],k=Ei(Oi({}),2),j=k[0],S=k[1];Ni(function(){if(e.hasOwnProperty("type")){var t=hi({},i);t.component=e.type,t.id=e.id,l(t)}},[e.type,e.id]),rt(function(){b.length>4&&fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:b,type:"user",token:Ci("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&Array.isArray(e.results)&&(e.results.map(function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))}),E(e.results))})},500,[b]),Ni(function(){var t=hi({},i);t.token=Ci("vibebp").getToken();var n=Ci("vibebp").getUser();t.user_id=n.id,r(!0);var a=window.vibebp.api.endpoints.members;i.component!==window.vibebp.api.endpoints.members&&(a=e.type+"/members/"+e.id),fetch("".concat(window.vibebp.api.url,"/").concat(a),{method:"post",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&(S(e.meta),s(e.data.members))})},[i]);return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:i.search_terms,placeholder:window.vibebp.translations.search_member,onChange:function(e){var t=hi({},i);t.search_terms=e.target.value,l(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{value:i.role,onChange:function(e){l(hi({},i,{role:e.target.value}))}},Object.keys(window.vibebp.components[e.type].membertypes).map(function(t){return wp.element.createElement("option",{value:t},window.vibebp.components[e.type].membertypes[t])})))),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"members"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map(function(t){return e.hasOwnProperty("type")?wp.element.createElement("div",{className:O.indexOf(t.ID)>-1?"selected":"",onClick:function(){var e=bi(O);O.indexOf(t.ID)>-1?e.splice(O.indexOf(t.ID),1):e.push(t.ID),N(e)}},wp.element.createElement(ca,{member:t,type:e.type,id:e.id})):wp.element.createElement("div",{className:O.indexOf(t.ID)>-1?"selected":""},wp.element.createElement(ca,{member:t}))}):"")),wp.element.createElement("div",{className:"portal_footer"},"groups"===i.component?m?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},f.length?wp.element.createElement(ki,null,f.map(function(e){return wp.element.createElement(Jn,{type:"user",click:function(){var t=bi(f);t.splice(t.indexOf(e),1),v(t)},id:{user_id:e}})}),wp.element.createElement("a",{className:"vicon vicon-control-forward",onClick:function(){var t="";if("invite"==m)"".concat(window.vibebp.api.url,"/groups/invite_member/").concat(e.id,"/");"add"==m&&(t="".concat(window.vibebp.api.url,"/groups/join_group/").concat(e.id,"/")),"requests"==m&&(t="".concat(window.vibebp.api.url,"/groups/requests/").concat(e.id,"/")),fetch(t,{method:"post",body:JSON.stringify({invitees:f,token:Ci("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&(p(!1),E([]),g([])),e.hasOwnProperty("message")&&Si("vibebp").addNotification({text:e.message});var t=hi({},i);t.page=1,l(t)})}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){p(!1)}})):""),wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:b,placeholder:window.vibebp.translations.search_member,onChange:function(e){g(e.target.value)}})),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){p(!1)}}))),y.length?wp.element.createElement("div",{className:"search_results"},y.map(function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){g("");var n=bi(y),r=bi(f);-1===r.indexOf(e.id)&&(r.push(e.id),v(r),n.splice(t,1),E(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))})):""):wp.element.createElement("div",{className:"actions"},!O.length&&!m&&j.hasOwnProperty("can_invite")&&j.can_invite?wp.element.createElement("a",{onClick:function(){return p("invite")},className:"button is-primary"},window.vibebp.translations.invite_members):"",!m&&j.hasOwnProperty("can_add_members")&&j.can_add_members?wp.element.createElement(ki,null,O.length?"":wp.element.createElement("a",{onClick:function(){return p("add")},className:"button is-info"},window.vibebp.translations.add_members),O.length&&j.member_actions?wp.element.createElement("div",{className:"members_actions_block"},wp.element.createElement("select",{onChange:function(t){O.length&&e.memberActions(t.target.value,O).then(function(){N([]),l(hi({},i))})}},wp.element.createElement("option",null,window.vibebp.translations.select_action),Object.keys(j.member_actions).map(function(e){return wp.element.createElement("option",{value:e},j.member_actions[e])}))):""):""):""))};function Pi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(n,!0).forEach(function(t){Ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ii=wp.element,Li=(Ii.createElement,Ii.useState),Fi=Ii.useEffect,Ji=Ii.Fragment,Hi=(Ii.render,wp.data),Yi=(Hi.dispatch,Hi.select),qi=function(e){var t=Mi(Li(!1),2),n=t[0],r=t[1],a=Mi(Li({avatar:{url:"",cropdata:""},name:"",description:"",status:"public",invite_status:"members",group_type:"",invitees:[],meta:[]}),2),i=a[0],l=a[1],o=Mi(Li(""),2),c=o[0],s=o[1],u=Mi(Li(""),2),m=u[0],p=u[1],d=Mi(Li([]),2),f=d[0],v=d[1],w=Mi(Li(!1),2),b=w[0],g=w[1],h=Mi(Li(!0),2),y=h[0],E=h[1],_=Mi(Li(!1),2),O=_[0],N=_[1],k=Mi(Li(!1),2),j=k[0],S=k[1],C=Mi(Li([]),2),x=C[0],P=C[1];Fi(function(){if(e.hasOwnProperty("group")){var t={url:e.group.avatar,cropdata:""};e.group.avatar.length&&E(!1),l(Ai({},i,{id:e.group.id,name:e.group.name,description:e.group.description,status:e.group.status,avatar:t}))}},[]),rt(function(){window.helpdesk&&j.length>4&&(N(!0),fetch("".concat(window.helpdesk.api.url,"/bbp/forums"),{method:"post",body:JSON.stringify({s:j,token:Yi("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){N(!1),P(e.data)}))},500,[j]),rt(function(){m.length>3&&(g(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:m,type:"user",token:Yi("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&(g(!1),Array.isArray(e.results)&&(e.results.map(function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))}),v(e.results)))}))},500,[m]);var D="button is-fullwidth is-primary is-rounded";n&&(D+=" is-loading");var A=!0;return console.log(e),e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("can_invite")&&!e.meta.can_invite&&(A=!1),wp.element.createElement("div",{className:"vibebp_create_group create_form"},wp.element.createElement("div",{className:"create_form_head"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.newgroup(!1)}})),wp.element.createElement("div",{className:"right_side"})),wp.element.createElement("div",{className:"group_creation_steps"},wp.element.createElement("div",{className:"group_step"},wp.element.createElement("div",{className:"group_avatar"},i.avatar.url.length&&!y?wp.element.createElement(Ji,null,wp.element.createElement("img",{src:i.avatar.url}),wp.element.createElement("div",{onClick:function(){E(!0)},className:"vicon vicon-image"})):wp.element.createElement(Ji,null,wp.element.createElement(ne,{type:"image",crop:"1",show:function(){return E(!1)},update:function(e,t){s(e);var n=Ai({},i);n.avatar.cropdata=t,l(n)}}),wp.element.createElement("div",{onClick:function(){E(!1)},className:"vicon vicon-image"}))),wp.element.createElement("div",{className:"group_creation_step vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_name),wp.element.createElement("input",{type:"text",value:i.name,onChange:function(e){l(Ai({},i,{name:e.target.value}))}})),wp.element.createElement("div",{className:"group_description vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_description),wp.element.createElement("textarea",{onChange:function(e){l(Ai({},i,{description:e.target.value}))},value:i.description})))),wp.element.createElement("div",{className:"group_step vibebp_form"},Object.keys(window.vibebp.components.groups.type).length&&window.vibebp.components.groups.hasOwnProperty("type")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_type),wp.element.createElement("select",{onChange:function(e){l(Ai({},i,{group_type:e.target.value}))},value:i.group_type},wp.element.createElement("option",null,window.vibebp.translations.select_group_type),Object.keys(window.vibebp.components.groups.type).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.type[e])}))):"",window.vibebp.components.groups.hasOwnProperty("forum")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.set_group_forum),i.meta.findIndex(function(e){return"forum_id"==e.meta_key})>-1?wp.element.createElement("span",{onClick:function(){var e=Ai({},i);e.meta.splice(i.meta.findIndex(function(e){return"forum_id"==e.meta_key}),1),l(e)}},wp.element.createElement(Jn,{type:"forum",id:{post_id:i.meta[i.meta.findIndex(function(e){return"forum_id"==e.meta_key})].meta_value}})):wp.element.createElement("div",{className:"search_forums"},wp.element.createElement("div",{className:O?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:j||"",placeholder:window.vibebp.translations.search_text,onChange:function(e){return S(e.target.value)}})),x.length?wp.element.createElement("div",{className:"group_forums"},x.map(function(e){return wp.element.createElement("span",{onClick:function(){var t=Ai({},i);i.meta.findIndex(function(e){return"forum_id"==e.meta_key})>-1&&t.meta.splice(i.meta.findIndex(function(e){return"forum_id"==e.meta_key}),1),t.meta.push({meta_key:"forum_id",meta_value:e.id}),l(t)}},e.title)})):"")):"",wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_status),wp.element.createElement("select",{onChange:function(e){l(Ai({},i,{status:e.target.value}))},value:i.status},Object.keys(window.vibebp.components.groups.status).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.status[e])}))),wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_invitations),wp.element.createElement("select",{onChange:function(e){l(Ai({},i,{invite_status:e.target.value}))},value:i.invite_status},Object.keys(window.vibebp.components.groups.invite_status).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_status[e])})))),A?wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.invite_members),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},i.invitees.map(function(e){return wp.element.createElement(Jn,{type:"user",click:function(){var t=Ai({},i);t.invitees.splice(t.invitees.indexOf(e),1),l(t)},id:{user_id:e}})})),wp.element.createElement("div",{className:b?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:m,placeholder:window.vibebp.translations.search_member,onChange:function(e){p(e.target.value)}}))),f.length?wp.element.createElement("div",{className:"search_results"},f.map(function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){p("");var n=Pi(f),r=Ai({},i);-1===r.invitees.indexOf(e.id)&&(r.invitees.push(e.id),l(r),n.splice(t,1),v(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))})):""))):"",wp.element.createElement("br",null),wp.element.createElement("a",{onClick:function(){r(!0);var t=Ai({},i,{token:Yi("vibebp").getToken()}),n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",c[0]),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/create_update_group"),{method:"post",body:n}).then(function(e){return e.json()}).then(function(t){r(!1),t.status&&e.newgroup(t.data)})},className:D},window.vibebp.translations.create_group)))};function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(n,!0).forEach(function(t){zi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Bi=wp.element,Ki=(Bi.createElement,Bi.useState),Vi=Bi.useEffect,Gi=Bi.Fragment,Qi=(Bi.render,wp.data),Zi=Qi.dispatch,Xi=Qi.select,el=function(e){var t=$i(Ki(!1),2),n=t[0],r=(t[1],$i(Ki(""),2)),a=(r[0],r[1],$i(Ki({}),2)),i=a[0],l=a[1],o=$i(Ki(null),2),c=o[0],s=o[1],u=$i(Ki([]),2),m=(u[0],u[1],$i(Ki(Wi({},e.group)),2)),p=m[0],d=m[1],f=$i(Ki(!1),2),v=f[0],w=f[1],b=$i(Ki({}),2),g=b[0],h=b[1],y=$i(Ki(!1),2),E=y[0],_=y[1];Vi(function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(p.id),{method:"post",body:JSON.stringify({context:"meta",token:Xi("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&(h(e.data),e.hasOwnProperty("tabs")&&(l(e.tabs),s(Object.keys(e.tabs)[0])))})},[]),Vi(function(){if("home"!==c)if(c&&c.indexOf("#")>-1){var e=window.location.href.split("#");Array.isArray(e)&&e.length>1&&(console.log(c.split("#")[1].split("&")[0].split("=")[1]),c.split("#")[1].split("&")[0].split("=")[1]&&(window.location.href+=e[0].activeTab,Zi("vibebp").setComponent(c.split("#")[1].split("&")[0].split("=")[1])))}else{var t=new CustomEvent("group_tab",{detail:{tab:c,group:p}});document.dispatchEvent(t)}},[c]);return wp.element.createElement(Gi,null,v?wp.element.createElement(qi,{group:p,newgroup:function(e){e?(d(e),w(!1)):w(!1)},meta:g}):wp.element.createElement("div",{className:"vibebp_full_group"},wp.element.createElement("div",{className:"group_head"},wp.element.createElement("div",{className:"leftright_wrapper group_top"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}})),g&&g.hasOwnProperty("is_admin")&&g.is_admin?wp.element.createElement("div",{className:"right_side"},wp.element.createElement("i",{className:"vicon vicon-settings",onClick:function(){w(!0)}})):""),wp.element.createElement("div",{className:"group_bottom"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:p.avatar})),wp.element.createElement("div",{className:"group_title"},wp.element.createElement("h1",{dangerouslySetInnerHTML:{__html:p.name}}),wp.element.createElement("div",{className:E?"group_description active":"group_description",onClick:function(){E&&_(!1)}},p.description,!E&&p.description.length>180?wp.element.createElement("span",{className:"more",onClick:function(){_(!0)}},window.vibebp.translations.more):"")))),n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"group_content"},Object.keys(i).length>1?wp.element.createElement("div",{className:"content_tabs_wrapper"},Object.keys(i).map(function(e){return wp.element.createElement("div",{className:c==e?"content_tab active":"content_tab",onClick:function(){s(e)}},wp.element.createElement("span",null,i[e]))})):"",c&&"home"!=c?wp.element.createElement("div",{className:"group_content_wrapper"},wp.element.createElement("div",{id:c})):wp.element.createElement("div",{className:"leftright_wrapper"},wp.element.createElement("span",null),wp.element.createElement("div",{className:"left_side"},wp.element.createElement(ze,{type:"groups",id:e.group.id})),wp.element.createElement("div",{className:"right_side"},wp.element.createElement(xi,{type:"groups",id:p.id,object:p,memberActions:function(e,t){return fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions"),{method:"post",body:JSON.stringify({action:e,members:t,group_id:p.id,token:Xi("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){e.status&&d(Wi({},p,{id:p.id})),e.hasOwnProperty("message")&&Zi("vibebp").addNotification({text:e.message})})}}),"object"===Ri(g)?Object.keys(g).map(function(e){if("invite_status"!==e&&"last_activity"!==e&&"total_member_count"!==e){var t=new CustomEvent("meta_key",{detail:g[e]});return document.dispatchEvent(t),wp.element.createElement("div",{id:e})}}):"")))))},tl=wp.element,nl=(tl.createElement,tl.useState,tl.useEffect,tl.Fragment,tl.render,wp.data),rl=(nl.dispatch,nl.select,function(e){return wp.element.createElement("div",{className:"vibebp_group",onClick:function(){e.show()}},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.group.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.group.name)))}),al=wp.element,il=(al.createElement,al.useState,al.useEffect,al.Fragment,al.render,wp.data),ll=(il.dispatch,il.select,function(e){return wp.element.createElement("div",{className:"vibebp_group_invite"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.invite.item.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.invite.item.name),wp.element.createElement("span",null,window.vibebp.components.groups[e.invite.item.status])),wp.element.createElement("div",{className:"inviter"},wp.element.createElement(Jn,{type:"user",id:{user_id:e.invite.inviter_id}})),wp.element.createElement("div",{className:"group_invite_time"},wp.element.createElement(ye,{time:e.invite.item.date_modified})),wp.element.createElement("div",{className:"group_actions"},wp.element.createElement("a",{className:"vicon vicon-check",onClick:function(){e.action(e.invite.item.id,"accept",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){e.action(e.invite.item.id,"reject",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){e.action(e.invite.item.id,"delete",e.invite.id)}})))});function ol(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(n,!0).forEach(function(t){ul(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pl=wp.element,dl=(pl.createElement,pl.useState),fl=pl.useEffect,vl=pl.Fragment,wl=(pl.render,wp.data),bl=wl.dispatch,gl=wl.select,hl=function(e){var t=ml(dl([]),2),n=t[0],r=t[1],a=ml(dl({page:1,orderby:"",accepted:"pending"}),2),i=a[0],l=a[1],o=ml(dl(""),2),c=(o[0],o[1]),s=ml(dl([]),2),u=s[0],m=s[1],p=ml(dl(!1),2),d=p[0],f=p[1],v=ml(dl(window.vibebp.components.groups.actions),2),w=(v[0],v[1],ml(dl([]),2)),b=w[0],g=w[1],h=ml(dl(!1),2),y=(h[0],h[1],ml(dl({mine:"unread",type:"",include:"",page:1,search_terms:"",label:""}),2)),E=y[0],_=y[1],O=ml(dl(!1),2),N=O[0],k=O[1],j=ml(dl(!1),2),S=j[0],C=j[1],x=ml(dl(!1),2),P=x[0],D=x[1],A=ml(dl(!1),2),T=A[0],M=A[1],I=ml(dl(!1),2),L=(I[0],I[1],ml(dl({text:"",color:"#000"}),2)),F=(L[0],L[1],ml(dl(""),2)),J=F[0],H=F[1],Y=ml(dl(!1),2),q=Y[0],R=Y[1];fl(function(){var e=gl("vibebp").getAction();if(e&&"view"==e){var t=gl("vibebp").getId();t&&_(sl({},E,{include:[t]}))}else E.include&&_(sl({},E,{include:""}));var n=gl("vibebp").getMenu().filter(function(e){return"groups"===e.parent});n.map(function(e,t){-1===n.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&-1==n[0].class.indexOf("current-menu-item")&&n[0].class.push("current-menu-item")}),g(n),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),rt(function(){if("invites"===J)f(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(J),{method:"post",body:JSON.stringify(sl({},i,{token:gl("vibebp").getToken()}))}).then(function(e){return e.json()}).then(function(e){if(f(!1),e.status)if(S){var t=ol(n);e.data.invites.map(function(e){t.push(e)}),r(ngroups),C(!1),t.length<e.data.total?k(!0):k(!1)}else r(e.data.invites),e.data.invites.length<e.data.total?k(!0):k(!1);else e.hasOwnProperty("message")&&c(e.message),r([])});else{var e=sl({},E);e.token=gl("vibebp").getToken();var t=gl("vibebp").getUser();e.user_id=t.id,f(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups),{method:"post",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(t){if(f(!1),t.status){if(S){var n=ol(u);t.data.groups.map(function(e){n.push(e)}),m(n),C(!1),n.length<t.data.total?k(!0):k(!1)}else m(t.data.groups),e.include&&M(0),t.data.groups.length<t.data.total?k(!0):k(!1);t.hasOwnProperty("can_create_groups")&&R(t.can_create_groups)}else m([])})}},500,[E,i,J]);var U=function(e,t,a){var i=ol(n);fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/invite/").concat(e),{method:"post",body:JSON.stringify({token:gl("vibebp").getToken(),action:t})}).then(function(e){return e.json()}).then(function(e){e.status&&(i.splice(n.findIndex(function(e){return e.id===a}),1),r(i))})};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.groups.label),b.map(function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=sl({},E);r.filter=e.css_id,r.page=1,M(!1),D(!1),E.css_id!==r.filter&&_(r),H(e.css_id);var a=ol(b),i=a.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),g(a)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},P?wp.element.createElement(qi,{newgroup:function(e){if(e){var t=ol(u);t.unshift(e),m(t),D(!1),M(0)}else D(!1)}}):!1!==T?wp.element.createElement(el,{group:u[T],show:function(){M(!1),_(sl({},E,{include:""})),bl("vibebp").setId(!1),bl("vibebp").setAction(!1)}}):wp.element.createElement(vl,null,wp.element.createElement("div",{className:"vibebp_main_head"},"invites"===J?wp.element.createElement(vl,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:i.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=sl({},i);t.search_terms=e.target.value,l(t)}})),wp.element.createElement("div",null,wp.element.createElement("select",{onChange:function(e){var t=sl({},i);t.accepted=e.target.value,l(t)}},Object.keys(window.vibebp.components.groups.invite_type).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_type[e])})),wp.element.createElement("select",{onChange:function(e){var t=sl({},i);t.orderby=e.target.value,l(t)}},Object.keys(window.vibebp.components.groups.invite_sort).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_sort[e])})))):wp.element.createElement(vl,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:E.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=sl({},E);t.search_terms=e.target.value,_(t)}})),wp.element.createElement("select",{onChange:function(e){var t=sl({},E);t.type=e.target.value,_(t)}},Object.keys(window.vibebp.components.groups.sorters).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.sorters[e])})))),d?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"invites"===J?wp.element.createElement("div",{className:"group_invites"},n.length||d?wp.element.createElement(vl,null,n.length?n.map(function(e,t){return wp.element.createElement(ll,{invite:e,action:U})}):""):wp.element.createElement(vl,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found))):wp.element.createElement("div",{className:"grouplist"},u.length||d?wp.element.createElement(vl,null,wp.element.createElement("div",{className:"vibebp_groups"},q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){D(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"",u.length?u.map(function(e,t){return wp.element.createElement(rl,{group:e,show:function(){M(t),bl("vibebp").setAction("view"),bl("vibebp").setId(e.id)}})}):""),N?wp.element.createElement("a",{className:"link",onClick:function(){var e=sl({},E);e.page=E.page+1,C(!0),_(e)}},window.vibebp.translations.more):""):wp.element.createElement(vl,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found),q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){D(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"")))))};function yl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yl(n,!0).forEach(function(t){_l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ol(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Nl=wp.element,kl=(Nl.createElement,Nl.useState),jl=(Nl.useEffect,Nl.Fragment),Sl=(Nl.render,wp.data),Cl=(Sl.dispatch,Sl.select),xl=function(e){var t=Ol(kl(!1),2),n=t[0],r=t[1],a=Ol(kl(window.vibebp.translations.save_changes),2),i=a[0],l=a[1],o=Ol(kl("email"),2),c=o[0],s=o[1],u=Cl("vibebp").getUser().email,m=Ol(kl({email:u,pwd:"",pass1:"",pass2:""}),2),p=m[0],d=m[1];return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.account_email)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"settings_tabs"},wp.element.createElement("a",{className:"setting_tab "+("email"==c?"active":""),onClick:function(){s("email")}},window.vibebp.translations.change_email),wp.element.createElement("a",{className:"setting_tab "+("password"==c?"active":""),onClick:function(){s("password")}},window.vibebp.translations.change_password)),wp.element.createElement("div",{className:"vibebp_form tab_content"},"email"==c?wp.element.createElement(jl,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.account_email),wp.element.createElement("input",{type:"email",onChange:function(e){d(El({},p,{email:e.target.value}))},value:p.email}),p.email!==u?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.confirm_old_password),wp.element.createElement("input",{type:"password",value:p.pwd,onChange:function(e){d(El({},p,{pwd:e.target.value}))}})):"")):"password"==c?wp.element.createElement(jl,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.change_password),wp.element.createElement("input",{type:"password",value:p.pass1,onChange:function(e){d(El({},p,{pass1:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.repeat_new_password),wp.element.createElement("input",{type:"password",value:p.pass2,onChange:function(e){d(El({},p,{pass2:e.target.value}))}}))):"",wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/save"),{method:"post",body:JSON.stringify(El({},p,{token:Cl("vibebp").getToken(),type:c}))}).then(function(e){return e.json()}).then(function(e){r(!1),l(e.message),setTimeout(function(){l(window.vibebp.translations.save_changes)},3e3)})}},i))))};function Pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Dl=wp.element,Al=(Dl.createElement,Dl.useState),Tl=Dl.useEffect,Ml=Dl.Fragment,Il=(Dl.render,wp.data),Ll=(Il.dispatch,Il.select),Fl=function(e){var t=Pl(Al(!0),2),n=t[0],r=t[1],a=Pl(Al({status:"",label:"",exports:"",message:"",submessage:""}),2),i=a[0],l=a[1],o=Pl(Al(!1),2),c=o[0],s=o[1];Tl(function(){u()},[]);var u=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data"),{method:"post",body:JSON.stringify({token:Ll("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),l(e)})};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.export_data_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(Ml,null,i.hasOwnProperty("exports")&&i.exports.length?wp.element.createElement(Ml,null,wp.element.createElement("div",{className:"export_data_items",dangerouslySetInnerHTML:{__html:i.exports}})):"",i.hasOwnProperty("message")&&i.message.length?wp.element.createElement("div",null,wp.element.createElement("div",{className:"export_data_message vbp_message",dangerouslySetInnerHTML:{__html:i.message}})):"",i.hasOwnProperty("can_make_new_request")&&i.can_make_new_request?wp.element.createElement("div",null,wp.element.createElement("a",{className:c?"button is-primary is-loading make_new_export_request":"button is-primary make_new_export_request",onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data/request"),{method:"post",body:JSON.stringify({token:Ll("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){s(!1),u()})}},i.label," ")):"",i.hasOwnProperty("report_link")&&i.report_link?wp.element.createElement("div",null,wp.element.createElement("a",{className:"link make_new_export_download",href:i.report_link,target:"__blank"},i.label," ")):"")))};function Jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ql=wp.element,Rl=(ql.createElement,ql.useState),Ul=ql.useEffect,Wl=ql.Fragment,zl=(ql.render,wp.data),$l=(zl.dispatch,zl.select),Bl=function(e){var t=Yl(Rl(!1),2),n=t[0],r=t[1],a=Yl(Rl({}),2),i=a[0],l=a[1];Ul(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/email"),{method:"post",body:JSON.stringify({token:$l("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),l(e)})},[]);var o=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jl(n,!0).forEach(function(t){Hl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i);n[e].value=t,l(n),fetch("".concat(window.vibebp.api.url,"/settings/email/set"),{method:"post",body:JSON.stringify({token:$l("vibebp").getToken(),setting:e,value:t})}).then(function(e){return e.json()}).then(function(e){})};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.send_email_notice)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement(Wl,null,Object.keys(i).map(function(e){return wp.element.createElement("div",{className:"setting"},wp.element.createElement("label",null,i[e].label),wp.element.createElement("div",{className:"switch"},"yes"==i[e].value?wp.element.createElement("input",{type:"checkbox",id:e,checked:!0,onClick:function(){return o(e,"no")}}):wp.element.createElement("input",{type:"checkbox",id:e,onClick:function(){return o(e,"yes")}}),wp.element.createElement("label",{for:e,className:"slider"})))})):""))};function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ql=wp.element,Zl=(Ql.createElement,Ql.useState),Xl=Ql.useEffect,eo=Ql.Fragment,to=(Ql.render,wp.data),no=(to.dispatch,to.select),ro=function(e){var t=Gl(Zl(!1),2),n=t[0],r=t[1],a=Gl(Zl({}),2),i=a[0],l=a[1];Xl(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/fields"),{method:"post",body:JSON.stringify({token:no("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),l(e)})},[]);var o=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(n,!0).forEach(function(t){Vl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i);n.fields[n.fields.findIndex(function(t){return t.id===e.id})].visibility=t,l(n),fetch("".concat(window.vibebp.api.url,"/xprofile/fields/setvisibility"),{method:"post",body:JSON.stringify({token:no("vibebp").getToken(),field_id:e.id,visibility:t})}).then(function(e){return e.json()}).then(function(e){})};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.visibility_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement(eo,null,i.groups.map(function(e){return wp.element.createElement("div",{className:"setting_group"},wp.element.createElement("label",null,e.name),i.fields.filter(function(t){return t.group_id===e.id}).map(function(e){return wp.element.createElement("div",{className:"setting_field"},wp.element.createElement("strong",null,e.name),wp.element.createElement("select",{value:e.visibility,onChange:function(t){return o(e,t.target.value)}},Object.keys(window.vibebp.components.xprofile.visibility).map(function(t){return wp.element.createElement("option",{value:t,selected:e.visibility==t},window.vibebp.components.xprofile.visibility[t])})))}))})):""))},ao=wp.element,io=(ao.createElement,ao.useState,ao.useEffect),lo=(ao.Fragment,ao.render,wp.data),oo=(lo.dispatch,lo.select,function(e){return io(function(){var e=new CustomEvent("vibebp_profile_settings");document.dispatchEvent(e),document.querySelector("body").classList.value.includes("withsidebar")&&document.querySelector("body").classList.remove("withsidebar")},[]),wp.element.createElement("div",{className:"profile_settings"},wp.element.createElement(xl,null),wp.element.createElement(ro,null),wp.element.createElement(Bl,null),wp.element.createElement(Fl,null),window.vibebp.settings.profile_settings.map(function(e){return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.label}})),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:e.key})))}))}),co=n(0),so=n.n(co),uo=wp.element,mo=(uo.createElement,uo.useState,uo.useEffect,uo.Fragment),po=(uo.render,wp.data),fo=(po.dispatch,po.select,function(e){return wp.element.createElement("div",{className:"vibebp_wc_full_order"},wp.element.createElement("div",{className:"vibebp_wc_order_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back}),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("div",{className:"vibebp_order_main"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",e.order.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),e.order.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),e.order.currency," ",e.order.total),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_payment_method),e.order.payment_details.method_title)),wp.element.createElement("div",{className:"vibebp_order_line_items"},e.order.line_items.length?e.order.line_items.map(function(e){return wp.element.createElement("div",{className:"vibebp_order_line_item"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_name),e.name," x ",e.quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_total),e.subtotal," ","0.00"!==e.subtotal_tax?wp.element.createElement("span",{className:"subtotal_tax"},"[",e.subtotal_tax,"]"):""))}):""),e.order.fee_lines.length||e.order.shipping_lines.length||e.order.coupon_lines.length?wp.element.createElement("div",{className:"vibebp_order_extra_items"},e.order.coupon_lines.length?wp.element.createElement(mo,null,wp.element.createElement("strong",null,window.vibebp.translations.coupons_applied),e.order.coupon_lines.map(function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.code),wp.element.createElement("span",null,e.amount))})):"",e.order.shipping_lines.length?wp.element.createElement(mo,null,wp.element.createElement("strong",null,window.vibebp.translations.shipping_rates),e.order.shipping_lines.map(function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))})):"",e.order.fee_lines.length?wp.element.createElement(mo,null,wp.element.createElement("strong",null,window.vibebp.translations.fees),e.order.fee_lines.map(function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))})):""):"",wp.element.createElement("div",{className:"vibebp_addresses"},wp.element.createElement("div",{className:"vibebp_billing_address"},wp.element.createElement("strong",null,window.vibebp.translations.billing_address),wp.element.createElement("span",null,e.order.billing_address.first_name," ",e.order.billing_address.last_name),wp.element.createElement("span",null,e.order.billing_address.email," ",e.order.billing_address.phone),e.order.billing_address.company.length?wp.element.createElement("span",null,e.order.billing_address.company):"",wp.element.createElement("span",null,e.order.billing_address.address_1),e.order.billing_address.address_2.length?wp.element.createElement("span",null,e.order.billing_address.address_2):"",wp.element.createElement("span",null,e.order.billing_address.city," ",e.order.billing_address.state," ",e.order.billing_address.country," ",e.order.billing_address.pincode)),e.order.shipping_address.first_name.length?wp.element.createElement("div",{className:"vibebp_shipping_address"},wp.element.createElement("strong",null,window.vibebp.translations.shipping_address),wp.element.createElement("span",null,e.order.shipping_address.first_name," ",e.order.shipping_address.last_name),wp.element.createElement("span",null,e.order.shipping_address.email," ",e.order.shipping_address.phone),e.order.shipping_address.company.length?wp.element.createElement("span",null,e.order.shipping_address.company):"",wp.element.createElement("span",null,e.order.shipping_address.address_1),e.order.shipping_address.address_2.length?wp.element.createElement("span",null,e.order.shipping_address.address_2):"",wp.element.createElement("span",null,e.order.shipping_address.city," ",e.order.shipping_address.state," ",e.order.shipping_address.country," ",e.order.shipping_address.pincode)):"")))});function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(n,!0).forEach(function(t){bo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ho=wp.element,yo=(ho.createElement,ho.useState),Eo=ho.useEffect,_o=ho.Fragment,Oo=(ho.render,wp.data),No=(Oo.dispatch,Oo.select),ko=function(e){var t=go(yo(!1),2),n=t[0],r=t[1],a=go(yo({page:1,order_date:"",status:""}),2),i=a[0],l=a[1],o=go(yo(!1),2),c=(o[0],o[1],go(yo([]),2)),s=c[0],u=c[1],m=go(yo(!1),2),p=m[0],d=m[1],f=go(yo(!1),2);f[0],f[1];return Eo(function(){var e=wo({},i);e.token=No("vibebp").getToken(),r(!0),fetch("".concat(window.vibebp.api.url,"/wc/orders"),{method:"post",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){console.log(e),r(!1),e.status&&u(e.orders)})},[i]),wp.element.createElement("div",{className:"vibebp_shop_orders"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):p?wp.element.createElement(fo,{order:p,back:function(){d(!1)}}):s.length?wp.element.createElement(_o,null,wp.element.createElement("div",{className:"vibebp_shop_orders_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement(so.a,{options:{value:i.order_date,defaultDate:i.order_date},onChange:function(e){l(wo({},i,{order_date:e[0].getTime()}))}})),wp.element.createElement("select",{value:i.status,onChange:function(e){l(wo({},i,{status:e.target.value}))}},wp.element.createElement("option",null,window.vibebp.translations.select_order_status),Object.keys(window.vibebp.components.shop.order_statuses).map(function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.shop.order_statuses[e])}))),s.map(function(e){var t=e[0];return wp.element.createElement("div",{className:"vibebp_wc_order",onClick:function(){d(t)}},wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("a",{className:"vibebp_order_number link",href:t.view_order_url,target:"_blank"},wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",t.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),t.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+t.status},window.vibebp.components.shop.order_statuses["wc-"+t.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_quantity),t.total_line_items_quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),t.currency," ",t.total)))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_orders))};function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var So=wp.element,Co=(So.createElement,So.useState),xo=So.useEffect,Po=(So.Fragment,So.render,wp.data),Do=(Po.dispatch,Po.select),Ao=function(e){var t=jo(Co(!1),2),n=t[0],r=t[1],a=jo(Co([]),2),i=a[0],l=a[1];return xo(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/downloads"),{method:"post",body:JSON.stringify({token:Do("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&l(e.downloads)})},[]),wp.element.createElement("div",{className:"vibebp_wc_downloads"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i.length?i.map(function(e){return wp.element.createElement("div",{className:"vibebp_wc_download"},wp.element.createElement("strong",null,e.download_name),wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.product_name),e.product_name),e.downloads_remaining?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.remaining_downloads),e.downloads_remaining):"",e.access_expires?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.access_expires),e.access_expires):"",wp.element.createElement("a",{href:e.file.file,target:"_blank",className:"button is-primary"},wp.element.createElement("span",{className:"vicon vicon-download"})," ",window.vibebp.translations.download))}):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_downloads))};function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Io(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Lo=wp.element,Fo=(Lo.createElement,Lo.useState),Jo=Lo.useEffect,Ho=(Lo.Fragment,Lo.render,wp.data),Yo=Ho.dispatch,qo=Ho.select,Ro=function(e){var t=Io(Fo(!1),2),n=t[0],r=t[1],a=Io(Fo({}),2),i=a[0],l=a[1],o=Io(Fo(),2),c=o[0],s=o[1],u=Io(Fo(!1),2),m=u[0],p=u[1];return Jo(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/addresses"),{method:"post",body:JSON.stringify({token:qo("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&l(e.addresses)})},[]),rt(function(){if(m){var e=c.split("-");fetch("".concat(window.vibebp.api.url,"/wc/addresses/update"),{method:"post",body:JSON.stringify({token:qo("vibebp").getToken(),address_type:e[0],field:e[1],value:i[e[0]][e[1]].value})}).then(function(e){return e.json()}).then(function(e){p(!1),e.status||e.hasOwnProperty("message")&&Yo("vibebp").addNotification({text:e.message})})}},500,[i]),wp.element.createElement("div",{className:"vibebp_wc_addresses"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?Object.keys(i).map(function(e){return wp.element.createElement("div",{className:"vibebp_wc_address"},wp.element.createElement("strong",null,window.vibebp.translations[e]),Object.keys(i[e]).map(function(t){return wp.element.createElement("div",{className:"vibebp_wc_address_field"},wp.element.createElement("span",{onClick:function(){s(c!==e+"-"+t&&e+"-"+t)}},i[e][t].label,c===e+"-"+t?wp.element.createElement("i",null,window.vibebp.translations.cancel):wp.element.createElement("span",{className:"vicon vicon-pencil"})),c===e+"-"+t?wp.element.createElement("div",{className:m?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:i[e][t].value,onChange:function(n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(n,!0).forEach(function(t){Mo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i);r[e][t].value=n.target.value,l(r),p(!0)}})):wp.element.createElement("span",null,i[e][t].value))}))}):"")};function Uo(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Bo=wp.element,Ko=(Bo.createElement,Bo.useState),Vo=Bo.useEffect,Go=(Bo.Fragment,Bo.render,wp.data),Qo=(Go.dispatch,Go.select),Zo=function(e){var t=$o(Ko({}),2),n=t[0],r=t[1],a=$o(Ko([]),2),i=a[0],l=a[1],o=$o(Ko(""),2),c=o[0],s=o[1];return Vo(function(){var e=Qo("vibebp").getMenu().filter(function(e){return"shop"===e.parent});e.map(function(t,n){-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&e[n].class.push("current-menu-item")}),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.shop.label),i.map(function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(n,!0).forEach(function(t){zo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);o.filter=e.css_id,o.page=1,n.css_id!==o.filter&&r(o),s(e.css_id);var c=Uo(i),u=c.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),l(c)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},"downloads"==c?wp.element.createElement(Ao,null):"edit-address"==c?wp.element.createElement(Ro,null):wp.element.createElement(ko,null)))};function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ec=wp.element,tc=(ec.createElement,ec.useState),nc=ec.useEffect,rc=ec.Fragment,ac=(ec.render,wp.data),ic=ac.dispatch,lc=ac.select,oc=function(e){var t=Xo(tc(!1),2),n=t[0],r=t[1],a=Xo(tc({}),2),i=a[0],l=a[1],o=Xo(tc({}),2),c=o[0],s=o[1];return nc(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/memberships"),{method:"post",body:JSON.stringify({token:lc("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&l(e.data),e.hasOwnProperty("message")&&ic("vibebp").addNotification({text:e.message}),e.hasOwnProperty("all_levels_page")&&s(e.all_levels_page)})},[]),wp.element.createElement("div",{className:"vibebp_pmpro_memberships"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(rc,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.billing)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.expiration)))),wp.element.createElement("tbody",null,i.map(function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,wp.element.createElement("h3",{dangerouslySetInnerHTML:{__html:e.name}}),wp.element.createElement("div",{className:"actions"},e.hasOwnProperty("change_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.change_link},window.vibebp.components.pmpro.translations.change):"",e.hasOwnProperty("cancel_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.cancel_link},window.vibebp.components.pmpro.translations.cancel," "):"",e.hasOwnProperty("renew")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.renew},window.vibebp.components.pmpro.translations.renew):"")),e.hasOwnProperty("billing_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.billing_html}}):"",e.hasOwnProperty("expiration_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.expiration_html}}):"")}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_memberships),c.length?wp.element.createElement("a",{target:"_blank",href:c},window.vibebp.components.pmpro.translations.view_all_levels):""))};function cc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var sc=wp.element,uc=(sc.createElement,sc.useState),mc=sc.useEffect,pc=(sc.Fragment,sc.render,wp.data),dc=(pc.dispatch,pc.select),fc=function(e){var t=cc(uc(!1),2),n=t[0],r=t[1],a=cc(uc({}),2),i=a[0],l=a[1],o=dc("vibebp").getUser();return mc(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/account"),{method:"post",body:JSON.stringify({token:dc("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&l(e.data)})},[]),wp.element.createElement("div",{className:"vibebp_pmpro_invoices"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("table",{className:"table",style:{width:"auto"}},wp.element.createElement("tbody",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.username),wp.element.createElement("td",null,o.username)),wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.email),wp.element.createElement("td",null,o.email)),i?wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("a",{href:i.edit_link},window.vibebp.components.pmpro.translations.edit_profile)),wp.element.createElement("td",null,wp.element.createElement("a",{href:i.change_password},window.vibebp.components.pmpro.translations.change_password))):"")))};function vc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var wc=wp.element,bc=(wc.createElement,wc.useState),gc=wc.useEffect,hc=wc.Fragment,yc=(wc.render,wp.data),Ec=yc.dispatch,_c=yc.select,Oc=function(e){var t=vc(bc(!1),2),n=t[0],r=t[1],a=vc(bc({}),2),i=a[0],l=a[1],o=vc(bc({}),2);o[0],o[1];return gc(function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/invoices"),{method:"post",body:JSON.stringify({token:_c("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(!1),e.status&&l(e.data),e.hasOwnProperty("message")&&Ec("vibebp").addNotification({text:e.message})})},[]),wp.element.createElement("div",{className:"vibebp_pmpro_invoices"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(hc,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.date)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.amount)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.status)))),wp.element.createElement("tbody",null,i.map(function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,e.hasOwnProperty("date")?wp.element.createElement("a",{target:"_blank",className:"",href:e.invoice_link},e.date):""),e.hasOwnProperty("level")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.level}}):"",e.hasOwnProperty("amount")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.amount}}):"",e.hasOwnProperty("status")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.status}}):"")}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_invoices)))};function Nc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Cc=wp.element,xc=(Cc.createElement,Cc.useState),Pc=Cc.useEffect,Dc=(Cc.Fragment,Cc.render,wp.data),Ac=(Dc.dispatch,Dc.select),Tc=function(e){var t=Sc(xc({}),2),n=t[0],r=t[1],a=Sc(xc([]),2),i=a[0],l=a[1],o=Sc(xc(""),2),c=o[0],s=o[1];return Pc(function(){var e=Ac("vibebp").getMenu().filter(function(e){return"memberships"===e.parent});e.map(function(t,n){-1===e.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1})&&(e[n].class.push("current-menu-item"),""==c&&s(e[n].css_id))}),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")},[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.pmpro.label),i.map(function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kc(n,!0).forEach(function(t){jc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kc(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);o.filter=e.css_id,o.page=1,n.css_id!==o.filter&&r(o),s(e.css_id);var c=Nc(i),u=c.findIndex(function(e){return e.class.indexOf("current-menu-item")>-1});c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),l(c)}},e.name)}))),wp.element.createElement("div",{className:"vibebp_main"},"memberships"==c?wp.element.createElement(oc,null):"account"==c?wp.element.createElement(fc,null):"invoices"==c?wp.element.createElement(Oc,null):""))};function Mc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ic=wp.element,Lc=(Ic.createElement,Ic.useState),Fc=Ic.useEffect,Jc=(Ic.Fragment,Ic.render,wp.data),Hc=(Jc.dispatch,Jc.select),Yc=function(e){var t=Mc(Lc(),2),n=t[0],r=t[1],a=Mc(Lc({}),2),i=a[0],l=a[1],o=Mc(Lc({}),2),c=o[0],s=o[1],u=Mc(Lc({}),2),m=u[0],p=u[1];return Fc(function(){if(e.page){var t=e.page.split("__");fetch("".concat(window.vibebp.api.url,"/getPost/"),{method:"post",body:JSON.stringify({post_type:t[1],id:t[2],token:Hc("vibebp").getToken()})}).then(function(e){return e.json()}).then(function(e){r(e.content),l(e.scripts),p(e.styles),s(e.objects)})}},[e.page]),Fc(function(){c&&Object.keys(c).map(function(e){window[e]=c[e]})},[c]),Fc(function(){i&&Object.keys(i).map(function(e){var t=document.createElement("script");t.src=i[e],t.id=e,document.body.appendChild(t),t.onload=function(){setTimeout(function(){document.dispatchEvent(new CustomEvent(e+"_loaded"))},300)}})},[i]),Fc(function(){m&&Object.keys(m).map(function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=m[e],t.type="text/css",t.id=e,document.head.appendChild(t)})},[m]),wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:n}})};function qc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Rc=wp.element,Uc=(Rc.createElement,Rc.useState),Wc=Rc.useEffect,zc=(Rc.Fragment,Rc.render,wp.data),$c=zc.dispatch,Bc=zc.select,Kc=function(e){var t=qc(Uc("dashboard"),2),n=t[0],r=t[1],a=qc(Uc(!1),2),i=a[0],l=a[1],o=qc(Uc([]),2),c=o[0],s=o[1],u=qc(Uc(0),2),m=u[0],p=u[1],d=qc(Uc(!1),2),f=d[0],v=d[1],w=qc(Uc(!1),2),b=w[0],g=w[1],h=qc(Uc(!1),2),y=h[0],E=h[1],_=qc(Uc([]),2),O=_[0],N=_[1],k=qc(Uc(Bc("vibebp").getUser()),2),j=k[0],S=k[1],C=qc(Uc(Bc("vibebp").getToken()),2),x=C[0],P=C[1],D=qc(Uc(),2),A=D[0],T=D[1],M=qc(Uc({}),2),I=M[0],L=M[1],F=qc(Uc(!1),2),J=F[0],H=F[1];Wc(function(){document.addEventListener("userLoaded",function(){x||(P(Bc("vibebp").getToken()),S(Bc("vibebp").getUser()))}),x&&(document.addEventListener("component_loaded",function(e){r(e.detail.component)}),Bc("vibebp").getData("loggedinMenu")?N(Bc("vibebp").getData("loggedinMenu")):fetch("".concat(window.vibebp.api.url,"/loggedinmenu"),{method:"post",body:JSON.stringify({token:x})}).then(function(e){return e.json()}).then(function(e){e.status&&($c("vibebp").setData("loggedinMenu",e.menu),N(e.menu))}))},[]),Wc(function(){setTimeout(function(){s(Bc("vibebp").getNotifications()),p(m+1)},5e3)},[m]),Wc(function(){window.innerWidth<1280?(g(!0),-1==document.querySelector("body").classList.contains("leftsidebar_minimised")&&document.querySelector("body").classList.add("leftsidebar_minimised")):(g(!1),document.querySelector("body").classList.contains("leftsidebar_minimised")>-1&&document.querySelector("body").classList.remove("leftsidebar_minimised")),window.addEventListener("resize",function(){window.innerWidth<1280?(g(!0),-1==document.querySelector("body").classList.contains("leftsidebar_minimised")&&document.querySelector("body").classList.add("leftsidebar_minimised")):(g(!1),document.querySelector("body").classList.contains("leftsidebar_minimised")>-1&&document.querySelector("body").classList.remove("leftsidebar_minimised"))})},[]);return x?wp.element.createElement("div",{className:"profile_grid"},wp.element.createElement("div",{className:"profile_grid_header"},wp.element.createElement("div",{className:"start_block"},"dashboard"==n?wp.element.createElement("div",{className:"dashboard_intro"},wp.element.createElement("h4",null,wp.element.createElement("strong",null,window.vibebp.translations.hello)," ,"),wp.element.createElement("h3",null,j.displayname," ")):wp.element.createElement("span",{onClick:function(){g(!b),b?document.querySelector("body").classList.remove("leftsidebar_minimised"):document.querySelector("body").classList.add("leftsidebar_minimised")}},wp.element.createElement("span",{className:b?window.innerWidth<480?"vicon vicon-angle-down":"vicon vicon-angle-right":window.innerWidth<480?"vicon vicon-angle-up":"vicon vicon-angle-left"}),wp.element.createElement("span",null,b?window.vibebp.translations.show_panel:window.vibebp.translations.hide_panel))),wp.element.createElement("span",{onDragOver:function(e){console.log(e),e.clientY<40?(L({transform:"translateY("+e.clientY+"px)"}),e.preventDefault()):(L({transform:"translateY(0px)"}),H(!0))}},wp.element.createElement("span",{draggable:"true",style:I,onTouchMove:function(e){console.log(e)},ref:function(e){e&&!A&&T(e)}},J?wp.element.createElement("div",{class:"lds-ripple"},wp.element.createElement("div",null),wp.element.createElement("div",null)):window.vibebp.translations.drag_to_refresh)),wp.element.createElement("div",{className:"end_block"},wp.element.createElement("div",{className:"notifications",onClick:function(){return v(!f)}},c.length?wp.element.createElement("span",{className:"count"},c.length):"",wp.element.createElement("span",{className:"vicon vicon-bell"}),f&&c.length?wp.element.createElement("div",{className:"notification_list"},c.map(function(e){return wp.element.createElement("div",{className:"notification_item"},wp.element.createElement("span",{className:e.hasOwnProperty("icon")?e.icon:"vicon vicon-alert"}),e.hasOwnProperty("sub")?wp.element.createElement("span",null,e.sub):"",wp.element.createElement("span",null,e.text))})):""),wp.element.createElement("div",{className:"user",onClick:function(){return E(!y)}},wp.element.createElement(Jn,{type:"user",id:{user_id:Bc("vibebp").getUser().id}}),y?wp.element.createElement("div",{className:"vibebp_profile_menu_wrapper"},wp.element.createElement("div",{className:"vibebp_profile_usermenu_content"},O.length?O.map(function(e){return wp.element.createElement("span",{className:e.classes.join(" "),onClick:function(){return function(e){e.classes.indexOf("bp-menu")>-1?(r(e.css_id),$c("vibebp").setComponent(e.css_id)):window.location.href=e.url}(e)},dangerouslySetInnerHTML:{__html:e.title}})}):"",wp.element.createElement("span",{onClick:function(){$c("vibebp").logout()}},wp.element.createElement("span",{className:"vicon vicon-power-off"}),window.vibebp.translations.logout))):""),window.vibebp.settings.firebase_config?wp.element.createElement("span",{className:"login_extras",onClick:function(){l(!i);var e=new CustomEvent("loginExtras",{detail:{loginExtras:!0}});document.dispatchEvent(e)}},wp.element.createElement("span",{className:"vicon vicon-align-justify"})):"")),"dashboard"===n?wp.element.createElement(W,null):"activity"===n?wp.element.createElement(ze,{type:"personal"}):"profile"===n?wp.element.createElement(jn,null):"notifications"===n?wp.element.createElement(Vn,null):"messages"===n?wp.element.createElement(Gr,null):"friends"===n?wp.element.createElement(Ya,null):"groups"===n?wp.element.createElement(hl,null):"settings"===n?wp.element.createElement(oo,null):"followers"===n?wp.element.createElement(wi,null):"shop"===n?wp.element.createElement(Zo,null):"memberships"===n?wp.element.createElement(Tc,null):-1!==n.indexOf("post_type")?wp.element.createElement(Yc,{page:n}):wp.element.createElement("div",{id:n+"_component"})):wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))};function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vc(n,!0).forEach(function(t){Qc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Xc=wp.element,es=(Xc.createElement,Xc.useState),ts=(Xc.useEffect,Xc.Fragment,Xc.render,wp.data),ns=(ts.dispatch,ts.select,function(e){var t=Zc(es({dark:!1,widgets:[]}),2),n=t[0],a=t[1];return wp.element.createElement(r.Provider,{value:Gc({},n,{update:function(e,t){var r=Gc({},n);"remove"===e?delete r[t]:r[e]=t,a(r)}})},wp.element.createElement("div",{className:n.dark?"vibebp_myprofile dark_theme "+window.vibebp.style:"vibebp_myprofile "+window.vibebp.style},wp.element.createElement(v,null),wp.element.createElement(Kc,null)))});n(8);function rs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var as=wp.element,is=(as.createElement,as.useState),ls=as.useEffect,os=as.Fragment,cs=as.render,ss=wp.data,us=(ss.dispatch,ss.select);document.addEventListener("DOMContentLoaded",function(){document.getElementById("vibebp_member")&&cs(wp.element.createElement(function(e){var t=rs(is({}),2),n=t[0],r=t[1];return ls(function(){document.addEventListener("userLoaded",function(){var e=us("vibebp").getUser();document.querySelector("body").classList.contains("page")&&!document.querySelector("body").classList.contains("profile")||document.querySelector("body").classList.contains("my-profile")&&parseInt(e.id)===parseInt(window.vibebp.user_id)?(r(e),document.querySelector("body").classList.add("vibebp_my_profile")):document.querySelector("body").classList.remove("vibebp_my_profile"),window.onpopstate=function(){console.log("detected");var e=window.location.href.split("#");Array.isArray(e)&&e.length>1&&e.map(function(e,t){t>0&&e.indexOf("&")?e.split("&").map(function(e){e.indexOf("=")&&("component"==e.split("=")[0]&&setTimeout(function(){console.log("not same")},200))}):e.indexOf("=")&&"component"==e.split("=")[0]&&setTimeout(function(){console.log("not same")},200)})}})},[]),wp.element.createElement(os,null,n&&Object.keys(n).length?wp.element.createElement(ns,{user:n}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.def}}))},{def:document.getElementById("vibebp_member").innerHTML}),document.getElementById("vibebp_member"))},!1)}]);